import{a as _,G as k,H as C,I as D}from"./urls-dc95fcef.js";import{U as A}from"./util-75dcb7cf.js";import{s as V}from"./shopTable-af3b6876.js";import{_ as L,r as p,o as S,c as I,a as s,i as M,e as n,w as r,n as u,h as m,t as g,p as E,g as P}from"./index-e96a63ea.js";import"./axios-c24e582b.js";import"./apiService-77935b08.js";import"./urls-04ad3523.js";import"./auth-eef4144a.js";import"./jquery-d8551b6e.js";const R={components:{shopTable:V},watch:{datalimit(l){}},data(){return{util:A,columns:[{name:"선택",id:"id",sort:!1,width:60,type:"allCheckbox"},{name:"번호",id:"number",sort:!1,width:60},{name:"답변여부",id:"answerCheckView",width:100},{name:"제목",id:"subject",width:450,textStyle:{"text-align":"left","padding-left":"10px"},type:"underline-action",action:"articleView"},{name:"작성자",id:"name",width:100},{name:"등록일",id:"createAt",sort:!0,width:120}],answer:"",ids:[],articleList:[],bid:"",paging:{total:"",links:[],currentPage:1,lastPage:1},page:1,datalimit:20,dataSort:{field:"createAt",sort:"desc"},answerCheck:"all",answerCheckList:[{title:"전체",value:"all"},{title:"답변완료",value:"yes"},{title:"미답변",value:"no"}],keywordCmd:"subject",keywordCmdList:[{title:"제목",value:"subject"},{title:"작성자",value:"name"}],keyword:"",dateCmd:"createAt",stdate:"",endate:"",datalimitList:[{title:"10개",value:10},{title:"20개",value:20},{title:"30개",value:30},{title:"50개",value:50},{title:"100개",value:100}],dayClass:{all:"active",to:"",yer:"",thr:"",week:"",mon:"",tmon:""},articleDialog:!1,selectedArticle:{},selectedId:"",pagingReload:!1,total:0}},created(){this.getData()},methods:{getData(){this.setDay("all"),this.getDataList(1)},setDay(l){for(let d in this.dayClass)d==l?this.dayClass[d]="active":this.dayClass[d]="";const t=new Date;let i=t.getMonth()+1,a=t.getDate();const e=t.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(a<10?"0"+a:a);switch(this.endate=e,l){case"all":this.stdate="",this.endate="";break;case"to":this.stdate=e;break;case"yer":t.setDate(a-1),i=t.getMonth()+1,a=t.getDate(),this.stdate=t.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(a<10?"0"+a:a);break;case"thr":t.setDate(a-3),i=t.getMonth()+1,a=t.getDate(),this.stdate=t.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(a<10?"0"+a:a);break;case"week":t.setDate(a-7),i=t.getMonth()+1,a=t.getDate(),this.stdate=t.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(a<10?"0"+a:a);break;case"mon":t.setMonth(i-1),i=t.getMonth(),a=t.getDate(),this.stdate=t.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(a<10?"0"+a:a);break;case"tmon":t.setMonth(i-3),i=t.getMonth(),a=t.getDate(),this.stdate=t.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(a<10?"0"+a:a);break}},searchReset(){this.keywordCmd="subject",this.keyword="",this.stdate="",this.endate="",this.bid="",this.dateCmd="createAt",this.total=0,this.setDay("all")},getSearchParams(l){return this.page=l,{orderByField:this.dataSort.field,orderBySort:this.dataSort.sort,limit:this.datalimit.toString(),page:l.toString(),keywordCmd:this.keywordCmd,keyword:this.keyword,dateCmd:this.dateCmd,stdate:this.stdate.toString(),endate:this.endate.toString(),answerCheck:this.answerCheck=="all"?"":this.answerCheck}},getDataList(l){const t=this.getSearchParams(l);_.post(k,t,i=>{this.setDataList(i.data)})},setDataList(l){this.articleList=[],this.paging={total:l.totalElements,currentPage:this.page,pageGroup:10,limit:this.datalimit};const t=parseInt(l.totalElements)-this.datalimit*(parseInt(this.page)-1);let i=0;for(let a of l.content)a.number=t-i,a.createAt=a.createAt.replace("T"," "),a.answerCheckView=a.answerCheck=="no"?"미답변":"답변완료",this.articleList.push(a),i++;this.tableShow=!0},pageMove(l){this.getDataList(l.page)},tableEventAction(l){switch(l.type){case"dataSort":this.dataSort=l.sort,this.getDataList(1);break}},articleView(l){this.selectedId=l.id;let t=this.articleList.filter(i=>i.id==l.id);this.selectedArticle=t[0],this.answer=this.selectedArticle.answerCheck=="yes"?this.selectedArticle.answer:"",this.articleDialog=!0},search(){this.getDataList(1)},reload(){this.memberDialog=!1,this.getDataList(this.page)},checkDataList(l){this.ids=[];for(let t in l)this.ids.push(t)},deleteArticle(){if(this.ids.length<1){const t={message:"한개이상의 게시물을 선택하세요"};this.emitter.emit("modalOpen",t);return}const l={type:"confirm",message:"게시글을 삭제하시겠습니까?",doAction:()=>{this.deleteAction(this.ids)}};this.emitter.emit("modalOpen",l)},deleteAction(l){const t={ids:l};this.emitter.emit("overlay","open"),_.post(C,t,i=>{this.emitter.emit("overlay","hide"),this.articleDialog=!1;const a={message:"게시글이 삭제되었습니다",doAction:()=>{this.getDataList(this.page)}};this.emitter.emit("modalOpen",a)})},saveAnswer(){if(!this.answer)return;this.emitter.emit("overlay","open");const l={id:this.selectedId.toString(),answer:this.answer};_.post(D,l,t=>{this.emitter.emit("overlay","hide"),this.articleDialog=!1;const i={message:"답변글이 등록되었습니다",doAction:()=>{this.getDataList(this.page)}};this.emitter.emit("modalOpen",i)})}}},h=l=>(E("data-v-10cf5ee7"),l=l(),P(),l),T={class:"board-article-list"},U={class:"table-box"},j={class:"search-box"},B=h(()=>s("div",{style:{display:"flex","justify-content":"space-between"}},[s("div",{class:"sub-title",style:{"padding-left":"10px"}}," 게시글 검색 ")],-1)),F={class:"table-search",cellspacing:"0",cellpadding:"0",border:"0"},N=h(()=>s("th",{style:{"border-radius":"5px"}},"검색어",-1)),O={style:{"border-bottom":"solid 1px #999","padding-bottom":"7px"}},Y={class:"select-box",style:{display:"flex","max-height":"40px","padding-top":"6px"}},z={class:"input-box",style:{"margin-left":"20px",width:"300px"}},G=h(()=>s("th",{style:{"border-bottom":"solid 1px #999","border-left":"solid 1px #999"}},"답변여부",-1)),H={style:{"border-bottom":"solid 1px #999","padding-bottom":"7px",width:"400px"}},W={class:"select-box",style:{display:"flex","max-height":"40px","padding-top":"6px"}},q=h(()=>s("th",{style:{"border-radius":"5px"}},"일자 검색",-1)),J={style:{"padding-bottom":"6px"},colspan:"3"},K={style:{display:"flex","max-height":"40px","padding-top":"6px"}},Q={class:"date-box"},X={style:{display:"flex","margin-top":"-5px","margin-left":"10px"}},Z=h(()=>s("div",{style:{width:"30px","text-align":"center","line-height":"50px",height:"50px"}},"~",-1)),$={class:"button-row"},tt=h(()=>s("span",null,"초기화",-1)),et=h(()=>s("span",null,"검색",-1)),st={style:{display:"flex",padding:"0 10px","justify-content":"space-between","z-index":"20"}},it={class:"sub-title",style:{display:"flex"}},at={class:"select-box",style:{display:"flex","max-height":"40px","padding-top":"4px"}},lt={class:"total"},ot={class:"modal-layout",style:{height:"700px",background:"#fff"}},nt={class:"modal-header"},dt=h(()=>s("div",{class:"modal-title"},"게시글 보기",-1)),rt={class:"modal-body",style:{height:"570px","overflow-x":"hidden"}},ct={class:"subject"},mt={class:"name"},ht={class:"contents"},pt={class:"answer"},ut={class:"modal-button-row",style:{"text-align":"center",padding:"15px"}};function gt(l,t,i,a,e,d){const y=p("v-select"),v=p("v-text-field"),c=p("v-btn"),w=p("shopTable"),x=p("font-awesome-icon"),b=p("v-textarea"),f=p("v-dialog");return S(),I("div",T,[s("div",U,[s("form",{novalidate:"",onSubmit:t[13]||(t[13]=M((...o)=>d.search&&d.search(...o),["prevent"]))},[s("div",j,[B,s("table",F,[s("tbody",null,[s("tr",null,[N,s("td",O,[s("div",Y,[n(y,{modelValue:e.keywordCmd,"onUpdate:modelValue":t[0]||(t[0]=o=>e.keywordCmd=o),variant:"outlined",density:"compact",style:{"max-width":"150px","margin-top":"-6px"},items:e.keywordCmdList},null,8,["modelValue","items"]),s("div",z,[n(v,{variant:"outlined",density:"compact",modelValue:e.keyword,"onUpdate:modelValue":t[1]||(t[1]=o=>e.keyword=o)},null,8,["modelValue"])])])]),G,s("td",H,[s("div",W,[n(y,{modelValue:e.answerCheck,"onUpdate:modelValue":t[2]||(t[2]=o=>e.answerCheck=o),variant:"outlined",density:"compact",style:{"max-width":"150px","margin-top":"-6px"},items:e.answerCheckList},null,8,["modelValue","items"])])])]),s("tr",null,[q,s("td",J,[s("div",K,[s("div",Q,[n(c,{variant:"outlined",class:u("white-button "+e.dayClass.to),onClick:t[3]||(t[3]=o=>d.setDay("to"))},{default:r(()=>[m("오늘 ")]),_:1},8,["class"]),n(c,{variant:"outlined",class:u("white-button "+e.dayClass.yer),onClick:t[4]||(t[4]=o=>d.setDay("yer"))},{default:r(()=>[m(" 어제 ")]),_:1},8,["class"]),n(c,{variant:"outlined",class:u("white-button "+e.dayClass.thr),onClick:t[5]||(t[5]=o=>d.setDay("thr"))},{default:r(()=>[m(" 3일 ")]),_:1},8,["class"]),n(c,{variant:"outlined",class:u("white-button "+e.dayClass.week),onClick:t[6]||(t[6]=o=>d.setDay("week"))},{default:r(()=>[m(" 1주일 ")]),_:1},8,["class"]),n(c,{variant:"outlined",class:u("white-button "+e.dayClass.mon),onClick:t[7]||(t[7]=o=>d.setDay("mon"))},{default:r(()=>[m(" 1개월 ")]),_:1},8,["class"]),n(c,{variant:"outlined",class:u("white-button "+e.dayClass.tmon),onClick:t[8]||(t[8]=o=>d.setDay("tmon"))},{default:r(()=>[m(" 3개월 ")]),_:1},8,["class"]),n(c,{variant:"outlined",class:u("white-button "+e.dayClass.all),onClick:t[9]||(t[9]=o=>d.setDay("all"))},{default:r(()=>[m(" 전체 ")]),_:1},8,["class"])]),s("div",X,[n(v,{type:"date",modelValue:e.stdate,"onUpdate:modelValue":t[10]||(t[10]=o=>e.stdate=o),density:"compact",variant:"outlined"},null,8,["modelValue"]),Z,n(v,{modelValue:e.endate,"onUpdate:modelValue":t[11]||(t[11]=o=>e.endate=o),type:"date",density:"compact",variant:"outlined"},null,8,["modelValue"])])])])])])])]),s("div",$,[n(c,{class:"white-button",variant:"outlined",onClick:t[12]||(t[12]=o=>d.searchReset())},{default:r(()=>[tt]),_:1}),n(c,{class:"search-button",type:"submit",variant:"tonal"},{default:r(()=>[et]),_:1})])],32),s("div",st,[s("div",it,[m("게시글 리스트 "),n(c,{depressed:"",color:"primary",outlined:"",style:{"margin-top":"-5px"},class:"sdel-button",rounded:"",onClick:t[14]||(t[14]=o=>d.deleteArticle())},{default:r(()=>[m(" 선택삭제 ")]),_:1})]),s("div",at,[s("div",lt,"전체게시글수 "+g(e.util.numberFormat(e.paging.total))+"개",1),n(y,{modelValue:e.datalimit,"onUpdate:modelValue":t[15]||(t[15]=o=>e.datalimit=o),variant:"outlined",density:"compact",style:{"max-width":"150px","max-height":"25px"},items:e.datalimitList},null,8,["modelValue","items"])])]),n(w,{datas:e.articleList,onPageMove:d.pageMove,onParentEvent:d.tableEventAction,onArticleView:d.articleView,pagingReload:e.pagingReload,columns:e.columns,paging:e.paging,onCheckDataList:d.checkDataList},null,8,["datas","onPageMove","onParentEvent","onArticleView","pagingReload","columns","paging","onCheckDataList"])]),n(f,{modelValue:e.articleDialog,"onUpdate:modelValue":t[20]||(t[20]=o=>e.articleDialog=o),width:"600",persistent:"",rounded:"",style:{"z-index":"100"}},{default:r(()=>[s("div",ot,[s("div",nt,[dt,s("div",{class:"modal-close",onClick:t[16]||(t[16]=o=>e.articleDialog=!1)},[n(x,{icon:"fa-solid fa-circle-xmark"})])]),s("div",rt,[s("div",ct,g(e.selectedArticle.subject),1),s("div",mt,"작성자 : "+g(e.selectedArticle.name),1),s("div",ht,g(e.selectedArticle.contents),1),s("div",pt,[n(b,{modelValue:e.answer,"onUpdate:modelValue":t[17]||(t[17]=o=>e.answer=o),rules:[o=>!!o||"답글내용을 입력하세요"],placeholder:"답글내용을 입력하세요",variant:"outlined"},null,8,["modelValue","rules"])])]),s("div",ut,[n(c,{type:"button",class:"white-button",style:{height:"45px",width:"120px",border:"solid 2px #555"},variant:"outlined",rounded:"",onClick:t[18]||(t[18]=o=>e.articleDialog=!1)},{default:r(()=>[m("닫기 ")]),_:1}),n(c,{class:"submit-button",style:{"margin-left":"20px",width:"120px"},rounded:"",type:"button",onClick:t[19]||(t[19]=o=>d.saveAnswer())},{default:r(()=>[m("답글저장 ")]),_:1})])])]),_:1},8,["modelValue"])])}const Dt=L(R,[["render",gt],["__scopeId","data-v-10cf5ee7"]]);export{Dt as default};
