import{a as y}from"./apiService-77935b08.js";import{B as V,D as U,E as j,F as Q}from"./urls-04ad3523.js";import{A as C}from"./auth-eef4144a.js";import{e as T}from"./eduAction-d64f11a0.js";import{u as F}from"./setting-932355f8.js";import{U as A}from"./util-75dcb7cf.js";import{_ as O,m as N,f as R,r as f,o,j as g,c as a,a as s,t as c,n as S,e as u,w,d as _,F as P,b as k,h as H,k as D,v as q,p as J,g as G,I as Y}from"./index-e96a63ea.js";import{J as L}from"./jquery-d8551b6e.js";import{M as z}from"./makeTable-121dd21a.js";import{_ as K}from"./ico_del-5d7ca91d.js";import{_ as W}from"./img_bot-69f44715.js";import"./axios-c24e582b.js";import"./xlsx-04f2268f.js";import"./realTimeEdu-31352dc5.js";const X="/assets/img_g1-4f210f2a.png",Z="/assets/img_g2-b1cd4de6.png",$="/assets/img_g3-51fc9642.png";const ee={components:{MakeTable:z},computed:{...N(T,["basketProblemList","basketMode"])},watch:{$route(e,i){e.name=="eduCreateContentMobile"||e.name=="eduModifyContentMobile"?this.listDialog=!0:(e.name=="eduCreate"||e.name=="eduModify")&&(this.listDialog=!1,i.name!="eduCreateContentMobile"&&i.name!="eduModifyContentMobile"&&this.setInit())},basketMode(e){e=="modal"&&this.getProblemListByIds()},allCheck(e){if(this.ids=[],e)for(const i of this.tempEduProblemList)this.ids.push(i.id)}},data(){return{util:A,serverFlag:!1,viewProblem:{},answer:[],addAnswer:[],questions:[],addQuestions:[],problems:[],tempForm:{},tempEduList:[],tempEduProblemList:[],selectIndex:0,id:"",allCheck:!1,ids:[],moreShow:!0,listDialog:!1,gtypeItems:{},schoolTypeItems:{},schoolType:"",gtype:"",textBook:"",target:"",prevClass:"none",nextClass:"none",questionType:"",chartDatas:{line:{show:!1,name:"선"},bar:{show:!1,name:"막대"},bubble:{show:!1,name:"버블"},doughnut:{show:!1,name:"도넛"},pie:{show:!1,name:"원"},polarArea:{show:!1,name:"극면적"},radar:{show:!1,name:"레이더"},scatter:{show:!1,name:"산점도"}},isGraphData:{}}},created(){this.$route.name=="eduCreateContentMobile"||this.$route.name=="eduModifyContentMobile"?this.listDialog=!0:this.listDialog=!1;const e=C.getSession();if((!e||!e.memberInfo||!e.memberInfo.payEndDate)&&(location.href="/"),this.memberInfo=e.memberInfo,this.setting=F(),this.setting.serverResponse)this.settingData(),this.setInit();else{const i=setInterval(()=>{this.setting.serverResponse&&(this.settingData(),this.setInit(),clearInterval(i))},100)}},methods:{...R(T,["ptmBasketProblemList"]),settingData(){this.gtypeItems=this.setting.gtypes,this.schoolTypeItems=this.setting.schoolTypes},setInit(){this.$route.params.eid&&(this.id=this.$route.params.eid),sessionStorage.getItem("tempEduForm")||this.$router.push("/edu/createList");const e=C.getSession();(!e||!e.memberInfo||!e.memberInfo.payEndDate)&&(location.href="/"),sessionStorage.getItem("tempEduForm")&&(this.tempForm=JSON.parse(sessionStorage.getItem("tempEduForm"))),this.ptmBasketProblemList(this.tempEduList),this.getData()},getData(){y.post(V,{id:this.id,limit:"10000"},e=>{this.id&&e.isProblemList&&this.setProblemList(e.isProblemList,"init")})},getProblemListByIds(){this.basketProblemList.length>0?y.post(U,{eids:JSON.stringify(this.basketProblemList)},e=>{e.status=="success"&&this.setProblemList(e.list,"basket")}):(this.tempEduList=[],this.tempEduProblemList=[],this.setViewProblemInfo())},setProblemList(e,i){this.tempEduList=[],this.tempEduProblemList=[],this.problems=[];for(const n of e){let r=n.source;r.id=n.id,this.tempEduProblemList.push(r),this.problems.push(r),this.tempEduList.push(n.id)}i=="init"&&this.ptmBasketProblemList(this.tempEduList),this.selectIndex=0,this.setViewProblemInfo()},setViewProblemInfo(){if(this.setEduArrow(),this.problems.length>0){this.moreShow=!0,this.viewProblem=this.problems[this.selectIndex],this.setProblemInfo();const e=JSON.parse(this.viewProblem.questions);if(this.questionType=e.questionType,this.questionType=="graph"){const i=JSON.parse(this.viewProblem.totalQuestion);i.totalQuestion&&(this.isGraphData=i.totalQuestion)}e.questions?(this.questions=e.questions,this.setAddAnswer(e.addQuestions),this.addQuestions=e.addQuestions):(this.questions=e,this.setAddAnswer([]),this.addQuestions=[])}else this.viewProblem={},this.answer=[],this.addAnswer=[],this.questions=[],this.addQuestions=[],this.selectIndex=0,this.schoolType="",this.gtype="",this.textBook="",this.target="",this.moreShow=!1,this.questionType=""},toggleMore(){this.moreShow=!this.moreShow,this.moreShow?L(".left-container  .subject-ul").slideDown(300):L(".left-container  .subject-ul").slideUp(300)},setProblemInfo(){let e=A.getSchoolTypeInfo(this.viewProblem,this.schoolTypeItems);this.schoolType=this.schoolTypeItems[this.viewProblem.schoolType.toString()]?this.schoolTypeItems[this.viewProblem.schoolType.toString()].title:"",this.gtype=this.gtypeItems[this.viewProblem.gtype.toString()],this.textBook=e.book,this.target=this.viewProblem.actTarget=="student"?"학생":"선생님"},setAddAnswer(e){if(this.addAnswer=[],e.length>0)for(const i in e){this.addAnswer[i]=[];for(const n in e[i])this.addAnswer[i].push("")}},moreReset(){this.moreShow||L(".left-container  .subject-ul").slideDown(1),this.moreShow=!0},setEduArrow(){if(this.problems.length<2){this.nextClass="none",this.prevClass="none";return}this.selectIndex<1?(this.nextClass="default",this.prevClass="none"):this.selectIndex+1>=this.problems.length?(this.nextClass="none",this.prevClass="default"):(this.nextClass="default",this.prevClass="default")},prevProblem(){if(this.selectIndex<1)return;this.moreReset(),this.selectIndex--,this.setEduArrow(),this.viewProblem=this.problems[this.selectIndex],this.setProblemInfo();const e=JSON.parse(this.viewProblem.questions);this.questionType=e.questionType,e.questions?(this.questions=e.questions,this.setAddAnswer(e.addQuestions),this.addQuestions=e.addQuestions):(this.questions=e,this.setAddAnswer([]),this.addQuestions=[])},nextProblem(){if(this.selectIndex+1>=this.problems.length)return;this.moreReset(),this.selectIndex++,this.setEduArrow(),this.viewProblem=this.problems[this.selectIndex],this.setProblemInfo();const e=JSON.parse(this.viewProblem.questions);this.questionType=e.questionType,e.questions?(this.questions=e.questions,this.setAddAnswer(e.addQuestions),this.addQuestions=e.addQuestions):(this.questions=e,this.setAddAnswer([]),this.addQuestions=[])},setBasket(){const e=this.viewProblem;this.tempEduList.filter(n=>n===e.id).length>0||(this.tempEduList.push(e.id),this.tempEduProblemList.push(e),this.ptmBasketProblemList(this.tempEduList))},deleteBasket(e){const i={type:"confirm",message:"삭제하시겠습니까?",doAction:()=>{this.deleteBasketActive("item",e)}};this.emitter.emit("modalOpen",i)},allDelete(){if(this.ids.length<1){const i={message:"대상을 하나이상 선택하세요"};this.emitter.emit("modalOpen",i);return}const e={type:"confirm",message:"삭제하시겠습니까?",doAction:()=>{this.deleteBasketActive("all")}};this.emitter.emit("modalOpen",e)},deleteBasketActive(e,i){if(e=="item"){const n=this.tempEduProblemList[i];let r=0,t=0;for(const d of this.tempEduList){if(d==n.id){t=r;break}r++}this.tempEduList.splice(t,1),this.tempEduProblemList.splice(i,1),this.allCheck?this.allCheck=!1:this.ids=[]}else{this.tempEduList=[];const n=[];for(const r of this.tempEduProblemList)this.ids.filter(d=>d===r.id).length<1&&(n.push(r),this.tempEduList.push(r.id));this.allCheck?this.allCheck=!1:this.ids=[],this.tempEduProblemList=n}this.ptmBasketProblemList(this.tempEduList),this.problems=[];for(const n of this.tempEduProblemList)this.problems.push(n);this.setViewProblemInfo()},down(e){if(e+1>=this.tempEduProblemList.length)return;const i=this.tempEduProblemList[e],n=this.tempEduProblemList[e+1];this.tempEduProblemList[e+1]=i,this.tempEduProblemList[e]=n,this.tempEduList=[];for(const r of this.tempEduProblemList)this.tempEduList.push(r.id)},up(e){if(e<1)return;const i=this.tempEduProblemList[e],n=this.tempEduProblemList[e-1];this.tempEduProblemList[e-1]=i,this.tempEduProblemList[e]=n,this.tempEduList=[];for(const r of this.tempEduProblemList)this.tempEduList.push(r.id)},saveEdu(){if(this.tempEduList.length<1){const n={message:"선택된 문제가 없습니다"};this.emitter.emit("modalOpen",n);return}if(this.serverFlag)return;this.emitter.emit("overlay","open"),this.serverFlag=!0;let e="선택 하신 과목으로 교육이 등록 되었습니다.<br>교육 시작 전 까지 교육 내용 수정이 가능합니다.",i=j;this.id&&(this.tempForm.id=this.id,e="선택 하신 과목으로 교육이 수정 되었습니다",i=Q),this.tempForm.eids=JSON.stringify(this.tempEduList),y.post(i,this.tempForm,n=>{this.serverFlag=!1,this.emitter.emit("overlay","hide");let r={};n.status=="success"?(sessionStorage.setItem("tempEduForm",""),r={message:e,doAction:()=>{location.href="/edu/createList"}}):r={message:"데이타 저장 실패"},this.emitter.emit("modalOpen",r)})}}},l=e=>(J("data-v-129d43b7"),e=e(),G(),e),se={key:1,class:"edu-layout-container"},te={class:"edu-header"},ie={class:"problem-text"},oe=l(()=>s("span",null,"등록 완료",-1)),le=l(()=>s("span",null,"등록 완료",-1)),ne={class:"edu-layout"},ae={class:"left-container"},re={key:0,class:"sub-header"},de={class:"subject"},he={class:"button-box"},ce={key:1,class:"subject-ul"},me={class:"col"},ue=l(()=>s("div",{class:"label"},"학교급",-1)),pe={class:"value"},be=l(()=>s("div",{class:"label view-pc"},"분야",-1)),_e={class:"value view-pc"},ve={class:"view-mobile"},fe=l(()=>s("div",{class:"label"},"분야",-1)),ge={class:"value"},we={class:"col"},ye=l(()=>s("div",{class:"label"},"교과명",-1)),Pe={class:"value"},ke=l(()=>s("div",{class:"label view-pc"},"활동대상",-1)),Le={class:"value view-pc"},Ee={class:"view-mobile"},Ie=l(()=>s("div",{class:"label"},"활동대상",-1)),Ce={class:"value"},Te={key:0},Ae=l(()=>s("div",{class:"label"},"성취기준",-1)),Se=["innerHTML"],De=l(()=>s("div",{class:"label"},"학습주제",-1)),qe=["innerHTML"],xe={key:1},Me=l(()=>s("div",{class:"label"},"주요활동",-1)),Be=["innerHTML"],Ve={key:2},Ue=l(()=>s("div",{class:"label"},"유의점",-1)),je=["innerHTML"],Qe={key:3},Fe=l(()=>s("div",{class:"label"},"출처",-1)),Oe={class:"value"},Ne={class:"sub-body"},Re={key:0,class:"ul-box"},He={class:"input-ul"},Je={key:0,class:"label"},Ge={key:1,class:"label"},Ye=["innerHTML"],ze={class:"sub-li"},Ke={class:"label"},We={key:1,class:"guide-box"},Xe=Y('<div class="step" data-v-129d43b7> STEP 01. </div><div class="step-title" data-v-129d43b7> 카테고리 선택 </div><div class="step-summary" data-v-129d43b7> 왼쪽의 리스트에서 원하는 카테고리를 선택해주세요. </div><div class="step-image" data-v-129d43b7><img src="'+X+'" data-v-129d43b7></div><div class="step" data-v-129d43b7> STEP 02. </div><div class="step-title" data-v-129d43b7> 원하는 과목 선택 및 담기 </div><div class="step-summary" data-v-129d43b7> 팝업 창에서 담고 싶은 학습주제를 체크한 후 담기 버튼을 클릭해주세요. </div><div class="step-image" data-v-129d43b7><img src="'+Z+'" data-v-129d43b7></div><div class="step" data-v-129d43b7> STEP 03. </div><div class="step-title" data-v-129d43b7> 담은 교육 목록 확인 </div><div class="step-summary" data-v-129d43b7> 담은 교육 목록을 확인해주세요. 상세 내용을 수정하거나 교육을 삭제할 수도 있습니다. </div><div class="step-image" data-v-129d43b7><img src="'+$+'" data-v-129d43b7></div>',12),Ze=[Xe],$e={class:"button-row"},es=l(()=>s("span",null,"뒤로",-1)),ss=l(()=>s("div",{class:"blank-container"},null,-1)),ts={class:"right-container"},is=l(()=>s("div",{class:"sub-header"},"담은 교육 목록",-1)),os={key:0,class:"sub-body"},ls={class:"del-button"},ns=l(()=>s("img",{src:K},null,-1)),as={class:"table-box"},rs={class:"edu-table",cellspacing:"0",cellpadding:"0",border:"0"},ds={style:{width:"80px"}},hs=l(()=>s("th",{class:"sm-tblet",style:{width:"50px"}},"순번",-1)),cs=l(()=>s("th",null,"교육명",-1)),ms=l(()=>s("th",{class:"mobile-tblet",style:{width:"75px"}},"순번 변경",-1)),us=l(()=>s("th",{style:{width:"60px"}},"삭제",-1)),ps=["value"],bs={class:"sm-tblet"},_s={class:"subject-box"},vs={class:"subject"},fs={class:"mobile-tblet"},gs={class:"updown-box"},ws=["onClick"],ys={key:1,class:"bot-box"},Ps=l(()=>s("img",{src:W},null,-1)),ks=l(()=>s("div",{class:"bot-message"}," 원하는 교육을 담아주세요. ",-1)),Ls=[Ps,ks];function Es(e,i,n,r,t,d){const x=f("RouterView"),b=f("font-awesome-icon"),v=f("v-btn"),M=f("MakeTable"),E=f("v-text-field");return t.listDialog?(o(),g(x,{key:0})):(o(),a("div",se,[s("div",te,[s("div",ie,c(t.viewProblem.subject),1),s("div",{class:S("arrow "+t.prevClass),onClick:i[0]||(i[0]=(...h)=>d.prevProblem&&d.prevProblem(...h))},[u(b,{icon:"fa-solid fa-chevron-left"})],2),s("div",{class:S("arrow "+t.nextClass),onClick:i[1]||(i[1]=(...h)=>d.nextProblem&&d.nextProblem(...h))},[u(b,{icon:"fa-solid fa-chevron-right"})],2),u(v,{class:"complete-button",type:"button",variant:"tonal",onClick:d.saveEdu},{default:w(()=>[oe]),_:1},8,["onClick"])]),u(v,{class:"mobile-complete-button",type:"button",variant:"tonal",onClick:d.saveEdu},{default:w(()=>[le]),_:1},8,["onClick"]),s("div",ne,[s("div",ae,[t.viewProblem.subject?(o(),a("div",re,[s("div",de,c(t.viewProblem.subject),1),s("div",he,[s("div",{class:"more-button",onClick:i[2]||(i[2]=h=>d.toggleMore())},[t.moreShow?(o(),g(b,{key:0,class:"icon",icon:"fa-solid fa-angle-up"})):(o(),g(b,{key:1,class:"icon",icon:"fa-solid fa-angle-down"}))])])])):_("",!0),t.viewProblem.subject?(o(),a("ul",ce,[s("li",me,[ue,s("div",pe,c(t.schoolType),1),be,s("div",_e,c(t.gtype),1)]),s("li",ve,[fe,s("div",ge,c(t.gtype),1)]),s("li",we,[ye,s("div",Pe,c(t.textBook),1),ke,s("div",Le,c(t.target),1)]),s("li",Ee,[Ie,s("div",Ce,c(t.target),1)]),t.viewProblem.standard?(o(),a("li",Te,[Ae,s("div",{class:"value",innerHTML:t.util.nl2brContent(t.viewProblem.standard)},null,8,Se)])):_("",!0),s("li",null,[De,s("div",{class:"value",innerHTML:t.util.nl2brContent(t.viewProblem.subject)},null,8,qe)]),t.viewProblem.mainAct?(o(),a("li",xe,[Me,s("div",{class:"value",innerHTML:t.util.nl2brContent(t.viewProblem.mainAct)},null,8,Be)])):_("",!0),t.viewProblem.note?(o(),a("li",Ve,[Ue,s("div",{class:"value",innerHTML:t.util.nl2brContent(t.viewProblem.note)},null,8,je)])):_("",!0),t.viewProblem.origin?(o(),a("li",Qe,[Fe,s("div",Oe,c(t.viewProblem.origin),1)])):_("",!0)])):_("",!0),s("div",Ne,[t.questions.length>0?(o(),a("div",Re,[(o(!0),a(P,null,k(t.questions,(h,m)=>(o(),a("ul",He,[s("li",null,[t.questionType=="wrong"?(o(),a("div",Je,c(h.query),1)):(o(),a("div",Ge,c(h),1)),t.questionType=="wrong"?(o(),a("div",{key:2,style:{"padding-bottom":"30px"},innerHTML:h.gpt},null,8,Ye)):t.questionType=="graph"?(o(),g(M,{key:3,viewType:"readonly",isGraphData:t.isGraphData,chartDatas:t.chartDatas},null,8,["isGraphData","chartDatas"])):(o(),g(E,{key:4,type:"text",variant:"outlined",modelValue:t.answer[m],"onUpdate:modelValue":p=>t.answer[m]=p,density:"compact",placeholder:"내용을 입력해주세요"},null,8,["modelValue","onUpdate:modelValue"]))]),t.addQuestions[m]?(o(!0),a(P,{key:0},k(t.addQuestions[m],(p,I)=>(o(),a("li",ze,[s("div",Ke,c(p),1),u(E,{type:"text",variant:"outlined",modelValue:t.addAnswer[m][I],"onUpdate:modelValue":B=>t.addAnswer[m][I]=B,density:"compact",placeholder:"내용을 입력해주세요"},null,8,["modelValue","onUpdate:modelValue"])]))),256)):_("",!0)]))),256))])):(o(),a("div",We,Ze)),s("div",$e,[u(v,{type:"button",variant:"tonal",class:"back-button",onClick:i[3]||(i[3]=h=>e.$router.back())},{default:w(()=>[es]),_:1})])])]),ss,s("div",ts,[is,t.tempEduProblemList.length>0?(o(),a("div",os,[s("div",ls,[s("span",{onClick:i[4]||(i[4]=(...h)=>d.allDelete&&d.allDelete(...h))},[ns,H(" 선택 삭제")])]),s("div",as,[s("table",rs,[s("thead",null,[s("tr",null,[s("th",ds,[D(s("input",{type:"checkbox","onUpdate:modelValue":i[5]||(i[5]=h=>t.allCheck=h),value:"yes"},null,512),[[q,t.allCheck]])]),hs,cs,ms,us])]),s("tbody",null,[(o(!0),a(P,null,k(t.tempEduProblemList,(h,m)=>(o(),a("tr",null,[s("td",null,[D(s("input",{type:"checkbox","onUpdate:modelValue":i[6]||(i[6]=p=>t.ids=p),value:h.id},null,8,ps),[[q,t.ids]])]),s("td",bs,c(m+1),1),s("td",_s,[s("div",vs,c(h.subject),1)]),s("td",fs,[s("div",gs,[u(v,{class:"updown",variant:"outlined",color:"#707070",onClick:p=>d.up(m)},{default:w(()=>[u(b,{class:"icon",icon:"fa-solid fa-caret-up"})]),_:2},1032,["onClick"]),u(v,{class:"updown",variant:"outlined",color:"#707070",onClick:p=>d.down(m)},{default:w(()=>[u(b,{class:"icon",icon:"fa-solid fa-caret-down"})]),_:2},1032,["onClick"])])]),s("td",null,[s("span",{onClick:p=>d.deleteBasket(m),class:"del-icon"},[u(b,{icon:"fa-regular fa-trash-can"})],8,ws)])]))),256))])])])])):(o(),a("div",ys,Ls))])])]))}const Fs=O(ee,[["render",Es],["__scopeId","data-v-129d43b7"]]);export{Fs as default};
