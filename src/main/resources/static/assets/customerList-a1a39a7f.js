import{A as E}from"./auth-eef4144a.js";import{a as g}from"./apiService-77935b08.js";import{a1 as I,a2 as x,a3 as T}from"./urls-04ad3523.js";import{p as U}from"./paging-4698e803.js";import{U as _}from"./util-75dcb7cf.js";import{w as R}from"./realTimeEdu-31352dc5.js";import{_ as B,m as P,r as m,o as r,c as d,a as t,e as a,w as f,i as k,F as S,b as M,d as p,t as y,p as H,g as O}from"./index-e96a63ea.js";import"./axios-c24e582b.js";const W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEeSURBVHgB7VTLbcJAEH1rBeVqOnA6iDugA/CVHIIriFJBWnAHBAHiaHeAO1g6gA7gDILljWWk9WJ+EhyQeNLK652Zt2+eRwbuDHUuOE51zyh8c9sqj3JP4b/bDgc3E44yPbWI3KJsbRDHUbhyY15dwTDViZAZYGEMoo1BU9aOJMUZ0HlX+DtxWRWTVAdbhbnsSfJBFQs7Ths+aYMu401X5ZHCXdmmtOWSCb6icEaFmewbHtpu/A3HmoskFgX0sY96BEWqKS4fVMstiHdK4Qc3gC0m3U74W6vwQMbR6F0iYgc+P1hCiyS3nvCAc3Nmg5bINPioKr4vXoTPQthPtX+p8FSOO4c5V6uhsOSM4Urk9ktFIf8eMR8zXI+8rHkc9s7EXP3OoQSKAAAAAElFTkSuQmCC";const j={components:{paging:U},computed:{...P(R,["prohibitList"])},data(){return{articleList:[],limit:12,page:1,total:0,paging:{},pagingReload:!1,bid:"question",modifyId:"",articleId:"",articleInfo:{},serverInit:!1,writeDialog:!1,form:null,searform:null,subject:"",contents:"",uid:"",keyword:""}},created(){var e;const i=E.getSession();i!=null&&i.memberInfo&&((e=i.memberInfo)!=null&&e.uid)&&(this.uid=i.memberInfo.uid),this.setInit()},methods:{setInit(){this.getData()},getData(){const i=this.getSearchParams();g.post(I,i,e=>{this.setDataList(e.data)})},getSearchParams(){return{bid:this.bid,limit:this.limit.toString(),page:this.page.toString(),orderByField:"createAt"}},setDataList(i){this.articleList=[],this.paging={total:i.totalElements,currentPage:this.page,pageGroup:10,limit:this.limit};for(let e of i.content){e.createAt=e.createAt.substring(0,10),e.answerShow=!1,e.contentShow=!1,e.contentsView=_.nl2brContent(e.contents),e.modify=!1,e.answerCheck=="yes"&&(e.answer=_.nl2brContent(e.answer));let n=e.name.length,h=e.name.substr(0,1),o="";for(let u=1;u<n-1;u++)o+="*";let l=e.name.substr(n-1,1);e.name=h+o+l,this.articleList.push(e)}this.pagingReload=!0,setTimeout(()=>{this.pagingReload=!1},500)},showContent(i){let e=0;for(let n of this.articleList)e==i?this.uid==n.uid&&(n.answerShow=!n.answerShow,n.contentShow=!n.contentShow):(n.answerShow=!1,n.contentShow=!1),e++},pageMove(i){this.page=i.page,this.getData()},validate(){if(!this.form)return;const i=_.checkProhibitByWord(this.subject,this.prohibitList),e=_.checkProhibitByWord(this.contents,this.prohibitList);if(!i||!e){let h={message:"Please use positive language based on respect and courtesy."};this.emitter.emit("modalOpen",h);return}this.emitter.emit("overlay","open");const n={id:this.articleId?this.articleId.toString():"",subject:this.subject,contents:this.contents,bid:this.bid};g.post(x,n,h=>{this.emitter.emit("overlay","hide"),this.writeDialog=!1;let l={message:this.articleId?"Your inquiry has been modified":"Your inquiry has been registered",doAction:()=>{this.page=1,this.getData()}};this.emitter.emit("modalOpen",l)})},search(){if(!this.uid){this.$router.push("/memberLoginIntro");return}this.emitter.emit("overlay","open");const e={keyword:this.keyword?this.keyword.toString():"",keywordCmd:"all",bid:this.bid,limit:this.limit.toString(),page:this.page.toString(),orderByField:"createAt"};g.post(I,e,n=>{this.emitter.emit("overlay","hide"),this.setDataList(n.data)})},registArticle(){this.uid?(this.articleId="",this.writeDialog=!0,setTimeout(()=>{this.$refs.myform.reset()},500)):this.$router.push("/memberLoginIntro")},modifyItem(i){this.uid&&(this.articleId=i,this.subject=this.articleInfo.subject,this.contents=this.articleInfo.contents,this.writeDialog=!0)},modifyToggle(i){this.modifyId=i.id,i.modify=!0,this.articleInfo=i},checkModifyEvent(){for(let i of this.articleList)this.modifyId!=i.id&&(i.modify=!1);this.modifyId=""},deleteItem(i){if(!this.uid)return;const e={type:"confirm",message:"Are you sure you want to delete your inquiry?",doAction:()=>{const n={id:i.id.toString()};this.deleteAction(n)}};this.emitter.emit("modalOpen",e)},deleteAction(i){this.emitter.emit("overlay","open"),g.post(T,i,e=>{this.emitter.emit("overlay","hide");let n={message:"Inquiry has been deleted"};this.emitter.emit("modalOpen",n),this.getData()})}},mounted(){window.document.addEventListener("click",()=>{this.checkModifyEvent()})},beforeUnmount(){window.document.removeEventListener("click",()=>{this.checkModifyEvent()})}},c=i=>(H("data-v-d4a71918"),i=i(),O(),i),q={class:"board-container"},F={class:"sub-box"},N=c(()=>t("div",{class:"sub-title"},"Inquire History",-1)),Q={class:"search-box"},X={class:"search-outline"},Y={class:"edu-table",cellspacing:"0",cellpadding:"0",border:"0"},J=c(()=>t("thead",null,[t("tr",null,[t("th",{style:{width:"60px"}}),t("th",{style:{width:"200px"}},"Answer status"),t("th",null,"Title"),t("th",{style:{width:"150px"}},"Writer"),t("th",{style:{width:"200px"}},"Date Created"),t("th",{style:{width:"20px"}})])],-1)),K={key:0,src:W},Z={key:0,class:"gray"},z={key:1,class:"blue"},G={class:"subject"},$=["onClick"],ee=["innerHTML"],te={style:{position:"relative"}},se={class:"name"},ie={class:"date"},oe={key:0,class:"modify-div"},ne={key:0,class:"overlay-box"},le=["onClick"],ae=["onClick"],re={key:0,class:"answer"},de=c(()=>t("td",null,null,-1)),ce=c(()=>t("td",null,[t("div",{class:"blue",style:{"font-size":"17px","font-weight":"bold"}},"Answer ")],-1)),ue={colspan:"2",style:{"text-align":"left"}},me=["innerHTML"],he={class:"date"},fe=c(()=>t("td",null,null,-1)),pe={class:"modal-layout",style:{background:"#fff"}},ge={class:"modal-header"},_e=c(()=>t("div",{class:"modal-title"}," Contact us",-1)),ye={class:"modal-body"},Ae=c(()=>t("div",{class:"label"},"title",-1)),ve=c(()=>t("div",{class:"label"},"Inquiry details",-1)),be=c(()=>t("span",null,"Submit",-1));function we(i,e,n,h,o,l){const u=m("font-awesome-icon"),v=m("v-btn"),b=m("v-text-field"),w=m("v-form"),C=m("paging"),L=m("v-textarea"),V=m("v-dialog");return r(),d(S,null,[t("div",q,[a(v,{class:"writeButton",onClick:e[0]||(e[0]=s=>l.registArticle())},{default:f(()=>[t("span",null,[a(u,{icon:"fa-solid fa-pen"})])]),_:1}),t("div",F,[N,t("div",Q,[t("div",X,[a(w,{ref:"searchform",modelValue:o.searform,"onUpdate:modelValue":e[3]||(e[3]=s=>o.searform=s),onSubmit:e[4]||(e[4]=k(s=>l.search(),["prevent"]))},{default:f(()=>[a(b,{modelValue:o.keyword,"onUpdate:modelValue":e[1]||(e[1]=s=>o.keyword=s),variant:"plain",density:"compact",class:"input-text-box",placeholder:"Please enter your search term"},null,8,["modelValue"]),a(u,{onClick:e[2]||(e[2]=s=>l.search()),class:"search-icon",icon:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue"])])])]),t("table",Y,[J,(r(!0),d(S,null,M(o.articleList,(s,D)=>(r(),d("tbody",null,[t("tr",null,[t("td",null,[o.uid!=s.uid?(r(),d("img",K)):p("",!0)]),t("td",null,[s.answerCheck=="no"?(r(),d("span",Z,"Waiting for reply")):(r(),d("span",z,"Answer Complete"))]),t("td",G,[t("div",{class:"subject string-cut",onClick:A=>l.showContent(D)},y(s.subject),9,$),s.contentShow?(r(),d("div",{key:0,class:"contents",innerHTML:s.contentsView},null,8,ee)):p("",!0)]),t("td",te,[t("div",se,y(s.name),1)]),t("td",null,[t("div",ie,y(s.createAt),1)]),t("td",null,[o.uid==s.uid?(r(),d("div",oe,[a(u,{class:"icon",icon:"fa-solid fa-ellipsis-vertical",onClick:A=>l.modifyToggle(s)},null,8,["onClick"]),s.modify?(r(),d("div",ne,[t("div",{class:"text",style:{cursor:"pointer"},onClick:A=>l.modifyItem(s.id)}," Modify",8,le),t("div",{class:"text",style:{cursor:"pointer"},onClick:A=>l.deleteItem(s)}," Delete",8,ae)])):p("",!0)])):p("",!0)])]),s.answerCheck=="yes"&&s.answerShow?(r(),d("tr",re,[de,ce,t("td",ue,[t("div",{class:"answerItem",innerHTML:s.answer},null,8,me)]),t("td",null,[t("div",he,y(s.createAt),1)]),fe])):p("",!0)]))),256))]),a(C,{paging:o.paging,reload:o.pagingReload,onPageMove:l.pageMove},null,8,["paging","reload","onPageMove"])]),a(V,{modelValue:o.writeDialog,"onUpdate:modelValue":e[9]||(e[9]=s=>o.writeDialog=s),width:"480",persistent:"",style:{"z-index":"100"}},{default:f(()=>[t("div",pe,[t("div",ge,[_e,t("div",{class:"modal-close",onClick:e[5]||(e[5]=s=>o.writeDialog=!1)},[a(u,{icon:"fa-solid fa-xmark"})])]),t("div",ye,[a(w,{ref:"myform",modelValue:o.form,"onUpdate:modelValue":e[8]||(e[8]=s=>o.form=s),onSubmit:k(l.validate,["prevent"])},{default:f(()=>[t("ul",null,[t("li",null,[Ae,a(b,{modelValue:o.subject,"onUpdate:modelValue":e[6]||(e[6]=s=>o.subject=s),variant:"outlined",rules:[s=>!!s||"Please enter a title"],placeholder:"Please enter a title",density:"compact"},null,8,["modelValue","rules"])]),t("li",null,[ve,a(L,{placeholder:"Please enter your inquiry details",modelValue:o.contents,"onUpdate:modelValue":e[7]||(e[7]=s=>o.contents=s),variant:"outlined",rules:[s=>!!s||"Please enter your inquiry details"]},null,8,["modelValue","rules"])])]),a(v,{variant:"tonal",type:"submit",class:"save-button"},{default:f(()=>[be]),_:1})]),_:1},8,["modelValue","onSubmit"])])])]),_:1},8,["modelValue"])],64)}const xe=B(j,[["render",we],["__scopeId","data-v-d4a71918"]]);export{xe as default};
