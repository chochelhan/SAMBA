import{a as f,y as _,z as w}from"./urls-dc95fcef.js";import{U as v}from"./util-75dcb7cf.js";import{s as k}from"./shopTable-af3b6876.js";import{_ as D,r as g,o as b,c as T,a as l,i as L,e as d,w as m,n as p,h,t as S,j as C,d as I,p as V,g as A}from"./index-e96a63ea.js";import"./axios-c24e582b.js";import"./apiService-77935b08.js";import"./urls-04ad3523.js";import"./auth-eef4144a.js";import"./jquery-d8551b6e.js";const q={components:{shopTable:k},watch:{datalimit(a){this.getDataList(1)},fc(a){if(a&&(this.sc="",this.scItems=[],this.scItems.push({title:"2차 카테고리 전체",value:""}),a)){const t=this.eduList.filter(i=>i.id.toString()===a);if(t[0]&&t[0].subList)for(const i of t[0].subList)i.use=="yes"&&this.scItems.push({title:i.name,value:i.id.toString()})}}},data(){return{util:v,columns:[],ids:[],fixed:0,keyword:"",memberList:[],paging:{total:"",links:[],currentPage:1,lastPage:1},page:1,datalimit:20,dataSort:{field:"createAt",sort:"desc"},datalimitList:[{title:"10개",value:10},{title:"20개",value:20},{title:"30개",value:30},{title:"50개",value:50},{title:"100개",value:100}],dayClass:{all:"active",to:"",yer:"",thr:"",week:"",mon:"",tmon:""},tableShow:!0,fcItems:[{title:"1차 카테고리 전체",value:""}],fc:"",sc:"",scItems:[{title:"2차 카테고리 전체",value:""}],eduList:[],searchType:"subject",searchTypeItems:[{value:"subject",title:"제목"},{value:"partName",title:"부서명"}],questionType:"",questionTypes:[{value:"",title:"전체"},{value:"normal",title:"일반 유형"},{value:"unit",title:"개별 유형"},{value:"step",title:"단계별 유형"},{value:"wrong",title:"오류 유형"},{value:"image",title:"이미지 유형"},{value:"graph",title:"그래프 유형"},{value:"kgpt",title:"KGPT 유형"}]}},created(){this.setInit()},methods:{setInit(){this.setColumn(),this.searchReset(),this.setDay("all"),this.getData()},setColumn(){this.columns=[{name:"선택",id:"id",sort:!1,width:70,type:"allCheckbox"},{name:"번호",id:"number",sort:!1,width:60},{name:"1차 카테고리",id:"fc",width:120},{name:"2차 카테고리",id:"sc",width:120},{name:"제목",id:"subject",width:200},{name:"부서명",id:"partName",width:100},{name:"문제유형",id:"questionType",width:90},{name:"즐찾",id:"favorite",sort:!0,width:70},{name:"등록일",id:"createAt",sort:!0,width:100},{name:"수정",id:"modify",width:80,type:"button",action:"modifyAction"}]},setDay(a){for(let n in this.dayClass)n==a?this.dayClass[n]="active":this.dayClass[n]="";const t=new Date;let i=t.getMonth()+1,e=t.getDate();const s=t.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(e<10?"0"+e:e);switch(this.endate=s,a){case"all":this.stdate="",this.endate="";break;case"to":this.stdate=s;break;case"yer":t.setDate(e-1),i=t.getMonth()+1,e=t.getDate(),this.stdate=t.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(e<10?"0"+e:e);break;case"thr":t.setDate(e-3),i=t.getMonth()+1,e=t.getDate(),this.stdate=t.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(e<10?"0"+e:e);break;case"week":t.setDate(e-7),i=t.getMonth()+1,e=t.getDate(),this.stdate=t.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(e<10?"0"+e:e);break;case"mon":t.setMonth(i-1),i=t.getMonth(),e=t.getDate(),this.stdate=t.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(e<10?"0"+e:e);break;case"tmon":t.setMonth(i-3),i=t.getMonth(),e=t.getDate(),this.stdate=t.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(e<10?"0"+e:e);break}},searchReset(){this.stdate="",this.endate="",this.dataSort.field="createAt",this.dataSort.sort="desc",this.datalimit=20,this.page=1,this.fc="",this.sc="",this.searchType="subject",this.keyword="",this.questionType=""},doSearchReset(){this.searchReset(),this.setDay("all"),this.getData()},getSearchParams(a){return this.page=a,{orderByField:this.dataSort.field,orderBySort:this.dataSort.sort,limit:this.datalimit.toString(),page:a.toString(),stdate:this.stdate,endate:this.endate,keyword:this.keyword,searchType:this.searchType,fc:this.fc,sc:this.sc,questionType:this.questionType}},getData(){this.getDataList(1)},getDataList(a){const t=this.getSearchParams(a);f.post(_,t,i=>{if(i.setting.setting&&i.setting.setting.edu){const e=JSON.parse(i.setting.setting.edu);this.eduList=[],this.fcItems=[];for(const s of e)this.eduList.push(s);this.fcItems.push({title:"1차 카테고리 전체",value:""});for(let s of this.eduList)s.use=="yes"&&this.fcItems.push({title:s.name,value:s.id.toString()})}this.setDataList(i)})},setDataList(a){this.memberList=[],this.paging={total:a.total,currentPage:this.page,pageGroup:10,limit:this.datalimit};const t=parseInt(a.total)-this.datalimit*(parseInt(this.page)-1);let i=0;for(let e of a.list){e.number=t-i,e.createAt=e.createAt.substring(0,10),e.updateAt=e.updateAt.substring(0,10),e.subject=v.getStrCut(e.subject,15);const s=this.eduList.filter(r=>r.id==e.fc);if(s&&s[0]){e.fc=s[0].name;const r=s[0].subList.filter(y=>y.id==e.sc);r&&r[0]&&(e.sc=r[0].name)}const n=JSON.parse(e.questions);if(n.questionType)switch(n.questionType){case"normal":e.questionType="일반 유형";break;case"unit":e.questionType="개별 유형";break;case"step":e.questionType="단계별 유형";break;case"wrong":e.questionType="오류 유형";break;case"image":e.questionType="이미지 유형";break;case"graph":e.questionType="그래프 유형";break;case"kgpt":e.questionType="KGPT 유형";break}else e.questionType="일반 유형";this.memberList.push(e),i++}this.tableShow=!0},pageMove(a){this.getDataList(a.page)},tableEventAction(a){switch(a.type){case"dataSort":this.dataSort=a.sort,this.getDataList(1);break}},modifyAction(a){this.$router.push("/admin/edu/eduRegist/"+a.id)},search(){this.getDataList(1)},checkDataList(a){this.ids=[];for(let t in a)this.ids.push(t)},deleteMember(){if(this.ids.length<1){let t={message:"삭제할 대상을 1개 이상 선택하세요"};this.emitter.emit("modalOpen",t);return}let a={type:"confirm",message:"선택된 대상을 삭제하시겠습니까?",doAction:()=>{this.emitter.emit("overlay","open"),f.post(w,{list:this.ids},t=>{if(this.emitter.emit("overlay","hide"),t.status=="success"){let i={message:"정보가 삭제되었습니다",doAction:()=>{this.tableShow=!1,this.setColumn(),this.searchReset(),this.setDay("all"),this.getDataList(1)}};this.emitter.emit("modalOpen",i)}})}};this.emitter.emit("modalOpen",a)}},updated(){}},c=a=>(V("data-v-8cac95df"),a=a(),A(),a),M={class:"coupon-list"},E={class:"table-box"},P={class:"search-box"},R=c(()=>l("div",{class:"sub-title",style:{"padding-left":"10px"}},"AI STORE 검색",-1)),U={class:"table-search",cellspacing:"0",cellpadding:"0",border:"0"},N=c(()=>l("th",{style:{"border-radius":"5px"}},"카테고리 선택",-1)),O={style:{"border-bottom":"solid 1px #999","max-height":"50px",width:"550px"}},j={style:{display:"flex"}},B=c(()=>l("div",{style:{width:"10px"}},null,-1)),F=c(()=>l("th",{style:{"border-left":"solid 1px #999","border-bottom":"solid 1px #999"}},"문제유형",-1)),Y={style:{"border-bottom":"solid 1px #999"}},G=c(()=>l("th",null,"검색어",-1)),z={style:{"border-bottom":"solid 1px #999"},colspan:"3"},J={style:{display:"flex","margin-top":"10px"}},K=c(()=>l("th",{style:{"border-radius":"5px"}},"등록일 검색",-1)),H={colspan:"4"},Q={style:{display:"flex","max-height":"40px",margin:"10px 0 5px 0"}},W={class:"date-box"},X={style:{display:"flex",margin:"-5px 0 0 10px"}},Z=c(()=>l("div",{style:{width:"30px","text-align":"center","line-height":"50px",height:"50px"}},"~ ",-1)),$={class:"button-row"},tt=c(()=>l("span",null,"초기화",-1)),et=c(()=>l("span",null,"검색",-1)),st={style:{display:"flex",padding:"0 10px","justify-content":"space-between","z-index":"20"}},it={class:"sub-title",style:{display:"flex"}},at={class:"select-box",style:{display:"flex","max-height":"40px","padding-top":"4px"}},lt={class:"total"};function ot(a,t,i,e,s,n){const r=g("v-select"),y=g("v-text-field"),u=g("v-btn"),x=g("shopTable");return b(),T("div",M,[l("div",E,[l("form",{novalidate:"",onSubmit:t[15]||(t[15]=L((...o)=>n.search&&n.search(...o),["prevent"]))},[l("div",P,[R,l("table",U,[l("tbody",null,[l("tr",null,[N,l("td",O,[l("div",j,[d(r,{style:{"max-width":"200px","max-height":"50px"},modelValue:s.fc,"onUpdate:modelValue":t[0]||(t[0]=o=>s.fc=o),items:s.fcItems,density:"compact",variant:"outlined"},null,8,["modelValue","items"]),B,d(r,{style:{"max-width":"200px","max-height":"50px"},modelValue:s.sc,"onUpdate:modelValue":t[1]||(t[1]=o=>s.sc=o),items:s.scItems,density:"compact",variant:"outlined"},null,8,["modelValue","items"])])]),F,l("td",Y,[d(r,{style:{width:"150px","max-height":"50px"},modelValue:s.questionType,"onUpdate:modelValue":t[2]||(t[2]=o=>s.questionType=o),items:s.questionTypes,density:"compact",variant:"outlined"},null,8,["modelValue","items"])])]),l("tr",null,[G,l("td",z,[l("div",J,[d(r,{style:{"max-width":"150px","max-height":"50px"},modelValue:s.searchType,"onUpdate:modelValue":t[3]||(t[3]=o=>s.searchType=o),items:s.searchTypeItems,density:"compact",variant:"outlined"},null,8,["modelValue","items"]),d(y,{style:{"max-width":"500px"},variant:"outlined",density:"compact",placeholder:"검색어를 입력하세요",modelValue:s.keyword,"onUpdate:modelValue":t[4]||(t[4]=o=>s.keyword=o)},null,8,["modelValue"])])])]),l("tr",null,[K,l("td",H,[l("div",Q,[l("div",W,[d(u,{variant:"outlined",class:p("white-button "+s.dayClass.to),onClick:t[5]||(t[5]=o=>n.setDay("to"))},{default:m(()=>[h("오늘 ")]),_:1},8,["class"]),d(u,{variant:"outlined",class:p("white-button "+s.dayClass.yer),onClick:t[6]||(t[6]=o=>n.setDay("yer"))},{default:m(()=>[h(" 어제 ")]),_:1},8,["class"]),d(u,{variant:"outlined",class:p("white-button "+s.dayClass.thr),onClick:t[7]||(t[7]=o=>n.setDay("thr"))},{default:m(()=>[h(" 3일 ")]),_:1},8,["class"]),d(u,{variant:"outlined",class:p("white-button "+s.dayClass.week),onClick:t[8]||(t[8]=o=>n.setDay("week"))},{default:m(()=>[h(" 1주일 ")]),_:1},8,["class"]),d(u,{variant:"outlined",class:p("white-button "+s.dayClass.mon),onClick:t[9]||(t[9]=o=>n.setDay("mon"))},{default:m(()=>[h(" 1개월 ")]),_:1},8,["class"]),d(u,{variant:"outlined",class:p("white-button "+s.dayClass.tmon),onClick:t[10]||(t[10]=o=>n.setDay("tmon"))},{default:m(()=>[h(" 3개월 ")]),_:1},8,["class"]),d(u,{variant:"outlined",class:p("white-button "+s.dayClass.all),onClick:t[11]||(t[11]=o=>n.setDay("all"))},{default:m(()=>[h(" 전체 ")]),_:1},8,["class"])]),l("div",X,[d(y,{type:"date",variant:"outlined",density:"compact",modelValue:a.stdate,"onUpdate:modelValue":t[12]||(t[12]=o=>a.stdate=o)},null,8,["modelValue"]),Z,d(y,{type:"date",variant:"outlined",density:"compact",modelValue:a.endate,"onUpdate:modelValue":t[13]||(t[13]=o=>a.endate=o)},null,8,["modelValue"])])])])])])])]),l("div",$,[d(u,{class:"white-button",variant:"outlined",onClick:t[14]||(t[14]=o=>n.doSearchReset())},{default:m(()=>[tt]),_:1}),d(u,{class:"search-button",type:"submit",variant:"tonal"},{default:m(()=>[et]),_:1})])],32),l("div",st,[l("div",it,[h("AI STORE 리스트 "),d(u,{depressed:"",color:"primary",outlined:"",class:"sdel-button",style:{"margin-top":"-5px"},rounded:"",onClick:t[16]||(t[16]=o=>n.deleteMember())},{default:m(()=>[h(" 선택삭제 ")]),_:1})]),l("div",at,[l("div",lt,"전체 AI STORE 수 "+S(s.util.numberFormat(s.paging.total))+"건",1),d(r,{modelValue:s.datalimit,"onUpdate:modelValue":t[17]||(t[17]=o=>s.datalimit=o),variant:"underlined",density:"compact",items:s.datalimitList},null,8,["modelValue","items"])])]),s.tableShow?(b(),C(x,{key:0,datas:s.memberList,fixed:s.fixed,onPageMove:n.pageMove,onParentEvent:n.tableEventAction,columns:s.columns,paging:s.paging,onCheckDataList:n.checkDataList,onModifyAction:n.modifyAction},null,8,["datas","fixed","onPageMove","onParentEvent","columns","paging","onCheckDataList","onModifyAction"])):I("",!0)])])}const gt=D(q,[["render",ot],["__scopeId","data-v-8cac95df"]]);export{gt as default};
