import{a as b,q as N,r as w}from"./urls-dc95fcef.js";import{_ as D,r as _,o as h,c as f,a as i,e as c,w as v,F as L,b as S,t as g,d as y,h as k,n as I,j as p,i as V,k as E,v as F,p as K,g as U}from"./index-e96a63ea.js";import"./axios-c24e582b.js";const O={data(){return{serverFlag:!1,name:"",eduList:[],firstList:[],nextList:[],form:null,showKey:"",registTitle:"분야",registShow:!1,firstIndex:"",nextIndex:"",nextShow:!1,stepType:!1,stepName:"",stepTitle:""}},created(){this.getData()},methods:{getData(){this.serverFlag||(this.serverFlag=!0,b.post(N,{},t=>{if(this.serverFlag=!1,t.setting&&t.setting.egtype){for(const e of JSON.parse(t.setting.egtype))this.eduList.push(e);for(let e of this.eduList)e.active="",this.firstList.push(e)}}))},newKey(t){switch(t){case"next":if(!this.firstIndex.toString()){this.emitter.emit("modalOpen",{message:"분야를 선택하세요"});return}this.registTitle=this.stepTitle;break;default:this.registTitle="분야";break}this.step=t;const e=new Date;this.showKey=e.getTime(),this.name="",this.step=="first"&&(this.stepType=!1,this.stepName=""),this.registShow=!0},useItem(t,e){let s={};switch(e){default:s=this.firstList[t];break;case"next":s=this.nextList[t];break}switch(s.use=s.use=="yes"?"no":"yes",e){default:this.eduList[t].use=s.use;break;case"next":this.eduList[this.firstIndex].subList[t].use=s.use;break}this.updateData()},upItem(t,e){if(t<1)return;let s=this.getStepDataList(e);const o=s[t],l=t-1,n=s[l];s[l]=o,s[t]=n,this.setEduList(e,s),this.updateData()},downItem(t,e){let s=this.getStepDataList(e);if(t+1>=s.length)return;const o=s[t],l=t+1,n=s[l];s[l]=o,s[t]=n,this.setEduList(e,s),this.updateData()},choiceSns(t,e){let s=[];switch(e){case"next":this.nextIndex=t,s=this.nextList;break;default:if(this.firstIndex=t,this.nextIndex="",this.nextList=[],this.nextShow=!1,this.eduList[t].stepType=="next"){this.nextShow=!0,this.stepTitle=this.eduList[t].stepName;for(let o of this.eduList[t].subList)o.active="",this.nextList.push(o)}s=this.firstList;break}for(let o of s)o.active="";s[t].active="active"},modifyItem(t,e){e||(e="first"),this.step=e,this.registTitle=this.getStepTitle(e);const o=this.getStepDataList(e)[t];this.name=o.name,this.showKey=o.id,this.step=="first"&&(this.stepType=o.stepType=="next",this.stepName=o.stepName),this.registShow=!0},deleteItem(t,e){const s=this.getStepTitle(e),o={type:"confirm",message:s+"을 삭제하시겠습니까?",doAction:()=>{let l=this.getStepDataList(e);const n=l[t];switch(l.splice(t,1),e){default:this.firstIndex==t&&(n.stepType=="next"&&(this.nextShow=!1),this.nextList=[],this.firstIndex="",this.nextIndex="");break;case"next":this.nextIndex==t&&(this.nextIndex="");break}this.setEduList(e,l),this.updateData(s+"이 삭제 되었습니다")}};this.emitter.emit("modalOpen",o)},getStepTitle(t){let e="";switch(t){case"next":e=this.stepTitle;break;default:e="분야";break}return e},getStepDataList(t){let e=[];switch(t){case"next":e=this.nextList;break;default:e=this.firstList;break}return e},setEduList(t,e){switch(t){default:this.eduList=e;break;case"next":this.eduList[this.firstIndex].subList=e;break}},validate(){if(!this.form)return;let t=!1,e=this.getStepDataList(this.step),s="";this.step=="first"&&(s=this.stepType?"next":"first",s=="first"&&(this.stepName=""));let o="",l=0;for(const u of e){if(u.id==this.showKey){u.name=this.name,this.step=="first"&&(u.stepType=s,u.stepName=this.stepName,s=="first"&&(u.subList=[]),o=l),t=!0;break}l++}switch(t?this.step=="first"&&o==this.firstIndex&&(s=="next"?this.nextShow=!0:(this.nextShow=!1,this.nextList=[])):this.step=="first"?e.push({id:this.showKey,name:this.name,use:"yes",subList:[],stepType:s,stepName:this.stepName}):e.push({id:this.showKey,name:this.name,use:"yes"}),this.step){case"next":this.eduList[this.firstIndex].subList=e;break;default:this.eduList=e;break}const n={egtype:JSON.stringify(this.eduList)};this.serverFlag||(this.serverFlag=!0,this.emitter.emit("overlay","open"),b.post(w,n,u=>{this.emitter.emit("overlay","hide"),this.registShow=!1,this.serverFlag=!1;let r={message:"설정정보가 저장 되었습니다"};this.name="",this.showKey="",this.emitter.emit("modalOpen",r)}))},updateData(t){const e={egtype:JSON.stringify(this.eduList)};this.serverFlag||(this.serverFlag=!0,this.emitter.emit("overlay","open"),b.post(w,e,s=>{if(this.emitter.emit("overlay","hide"),this.serverFlag=!1,t){let o={message:t};this.emitter.emit("modalOpen",o)}}))}}},z=t=>(K("data-v-08dc697d"),t=t(),U(),t),A={class:"page-container"},G={class:"memberSet-container"},P={class:"memberSet-list"},B={class:"memberSet-list-header"},M=z(()=>i("div",{class:"memberSet-title",style:{padding:"3px 0 0 0"}},"분야 목록",-1)),J={class:"memberSet-list-body"},Y={class:"main-memberSet"},j={class:"main-li"},q={style:{"min-width":"43px"}},H=["onClick"],Q={style:{"min-width":"70px"}},R={key:0,class:"memberSet-list"},W={class:"memberSet-list-header"},X={class:"memberSet-title",style:{padding:"3px 0 0 0"}},Z={class:"memberSet-list-body"},$={class:"main-memberSet"},ee={class:"main-li"},te={style:{"min-width":"43px"}},se=["onClick"],ie={style:{"min-width":"70px"}},le={class:"modal-layout",style:{background:"#fff"}},ae={class:"modal-header"},ne={class:"modal-title"},oe={class:"modal-body"},re={class:"memberSet-regist"},de={class:"table-ul"},he={class:"label-input"},ce={key:0,style:{"margin-top":"20px"}},me={class:"label-input"},ue={key:1},fe={class:"label-input"},pe={class:"button-row"};function _e(t,e,s,o,l,n){const u=_("v-btn"),r=_("font-awesome-icon"),x=_("v-text-field"),T=_("v-form"),C=_("v-dialog");return h(),f("div",A,[i("div",G,[i("div",P,[i("div",B,[M,c(u,{class:"white-button",onClick:e[0]||(e[0]=a=>n.newKey("first")),variant:"outlined",style:{"min-width":"60px",width:"60px"}},{default:v(()=>[k(" 등록 ")]),_:1})]),i("div",J,[(h(!0),f(L,null,S(l.firstList,(a,d)=>(h(),f("ul",Y,[i("li",j,[i("div",{class:I("main-data "+a.active),style:{cursor:"pointer"}},[i("div",q,[c(r,{onClick:m=>n.upItem(d),icon:"fa-solid fa-up-long",style:{"font-size":"12pt",color:"deepskyblue"}},null,8,["onClick"]),c(r,{onClick:m=>n.downItem(d),style:{"margin-left":"5px","font-size":"12pt",color:"palevioletred"},icon:"fa-solid fa-down-long"},null,8,["onClick"])]),i("div",{class:"gname",onClick:m=>n.choiceSns(d)},g(a.name),9,H),i("div",Q,[a.id!="textbook"&&a.id!="creative"&&a.id!="gclass"&&a.id!="etc"?(h(),p(r,{key:0,onClick:m=>n.modifyItem(d),style:{"margin-right":"10px"},icon:"fa-solid fa-pen"},null,8,["onClick"])):y("",!0),a.use=="yes"?(h(),p(r,{key:1,onClick:m=>n.useItem(d),icon:"fa-solid fa-eye"},null,8,["onClick"])):(h(),p(r,{key:2,onClick:m=>n.useItem(d),icon:"fa-solid fa-eye-slash"},null,8,["onClick"])),a.id!="textbook"&&a.id!="creative"&&a.id!="gclass"&&a.id!="etc"?(h(),p(r,{key:3,onClick:m=>n.deleteItem(d,"first"),style:{"margin-left":"10px"},icon:"fa-solid fa-trash"},null,8,["onClick"])):y("",!0)])],2)])]))),256))])]),l.nextShow?(h(),f("div",R,[i("div",W,[i("div",X,g(l.stepTitle)+" 목록",1),c(u,{class:"white-button",onClick:e[1]||(e[1]=a=>n.newKey("next")),variant:"outlined",style:{"min-width":"60px",width:"60px"}},{default:v(()=>[k(" 등록 ")]),_:1})]),i("div",Z,[(h(!0),f(L,null,S(l.nextList,(a,d)=>(h(),f("ul",$,[i("li",ee,[i("div",{class:I("main-data "+a.active),style:{cursor:"pointer"}},[i("div",te,[c(r,{onClick:m=>n.upItem(d,"next"),icon:"fa-solid fa-up-long",style:{"font-size":"12pt",color:"deepskyblue"}},null,8,["onClick"]),c(r,{onClick:m=>n.downItem(d,"next"),style:{"margin-left":"5px","font-size":"12pt",color:"palevioletred"},icon:"fa-solid fa-down-long"},null,8,["onClick"])]),i("div",{class:"gname",onClick:m=>n.choiceSns(d,"next")},g(a.name),9,se),i("div",ie,[c(r,{onClick:m=>n.modifyItem(d,"next"),style:{"margin-right":"10px"},icon:"fa-solid fa-pen"},null,8,["onClick"]),a.use=="yes"?(h(),p(r,{key:0,onClick:m=>n.useItem(d,"next"),icon:"fa-solid fa-eye"},null,8,["onClick"])):(h(),p(r,{key:1,onClick:m=>n.useItem(d,"next"),icon:"fa-solid fa-eye-slash"},null,8,["onClick"])),c(r,{onClick:m=>n.deleteItem(d,"next"),style:{"margin-left":"10px"},icon:"fa-solid fa-trash"},null,8,["onClick"])])],2)])]))),256))])])):y("",!0)]),c(C,{modelValue:l.registShow,"onUpdate:modelValue":e[7]||(e[7]=a=>l.registShow=a),width:"500",persistent:"",style:{"z-index":"100"}},{default:v(()=>[i("div",le,[i("div",ae,[i("div",ne,g(l.registTitle)+" 등록 ",1),i("div",{class:"modal-close",onClick:e[2]||(e[2]=a=>l.registShow=!1)},[c(r,{icon:"fa-solid fa-circle-xmark"})])]),i("div",oe,[i("div",re,[i("div",null,[c(T,{modelValue:l.form,"onUpdate:modelValue":e[6]||(e[6]=a=>l.form=a),novalidate:"",onSubmit:V(n.validate,["prevent"])},{default:v(()=>[i("div",null,[i("ul",de,[i("li",null,[i("div",he,[c(x,{modelValue:l.name,"onUpdate:modelValue":e[3]||(e[3]=a=>l.name=a),ref:"name",label:l.registTitle,variant:"outlined",density:"compact",rules:[a=>!!a||l.registTitle+"을 입력해주세요"],placeholder:l.registTitle+"을 입력해주세요"},null,8,["modelValue","label","rules","placeholder"])])]),t.step=="first"?(h(),f("li",ce,[i("div",me,[i("label",null,[E(i("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>l.stepType=a),value:"yes"},null,512),[[F,l.stepType]]),k(" 2단계 카테고리 사용 ")])])])):y("",!0),t.step=="first"&&l.stepType?(h(),f("li",ue,[i("div",fe,[c(x,{modelValue:l.stepName,"onUpdate:modelValue":e[5]||(e[5]=a=>l.stepName=a),ref:"name",variant:"outlined",density:"compact",label:"카테고리명",rules:[a=>!!a||"카테고리명을 입력해주세요"],placeholder:"카테고리명을 입력해주세요"},null,8,["modelValue","rules"])])])):y("",!0)])]),i("div",pe,[c(u,{class:"submit-button",type:"submit"},{default:v(()=>[k(" 정보 저장")]),_:1})])]),_:1},8,["modelValue","onSubmit"])])])])])]),_:1},8,["modelValue"])])}const ke=D(O,[["render",_e],["__scopeId","data-v-08dc697d"]]);export{ke as default};
