import{a as k,o as F,p as y}from"./urls-dc95fcef.js";import{_ as V,r as f,o as c,c as _,a as i,e as u,w as v,F as x,b as I,h as b,n as w,t as L,j as m,d as p,i as E,p as N,g as O}from"./index-e96a63ea.js";import"./axios-c24e582b.js";const K={data(){return{serverFlag:!1,name:"",eduList:[],firstList:[],nextList:[],lastList:[],form:null,showKey:"",registTitle:"1차 카테고리",registShow:!1,firstIndex:"",nextIndex:"",lastIndex:"",textbookShow:!1}},created(){this.getData()},methods:{getData(){this.serverFlag||(this.serverFlag=!0,k.post(F,{},e=>{if(this.serverFlag=!1,e.setting&&e.setting.edu){const t=JSON.parse(e.setting.edu);for(const s of t)this.eduList.push(s);for(let s of this.eduList)s.active="",this.firstList.push(s)}}))},newKey(e){switch(e){case"next":if(!this.firstIndex.toString()){this.emitter.emit("modalOpen",{message:"2차 카테고리를 선택하세요"});return}this.registTitle="2차 카테고리";break;default:this.registTitle="1차 카테고리";break}this.step=e;const t=new Date;this.showKey=t.getTime(),this.name="",this.registShow=!0},useItem(e,t){let s={};switch(t){default:s=this.firstList[e];break;case"next":s=this.nextList[e];break;case"last":s=this.lastList[e];break}switch(s.use=s.use=="yes"?"no":"yes",t){default:this.eduList[e].use=s.use;break;case"next":this.eduList[this.firstIndex].subList[e].use=s.use;break;case"last":this.eduList[this.firstIndex].subList[this.nextIndex].subList[e].use=s.use;break}this.updateData()},upItem(e,t){if(e<1)return;let s=this.getStepDataList(t);const l=s[e],n=e-1,o=s[n];s[n]=l,s[e]=o,this.setEduList(t,s),this.updateData()},downItem(e,t){let s=this.getStepDataList(t);if(e+1>=s.length)return;const l=s[e],n=e+1,o=s[n];s[n]=l,s[e]=o,this.setEduList(t,s),this.updateData()},choiceSns(e,t){let s=[];switch(t){case"next":this.nextIndex=e,this.lastIndex="",this.lastList=[];for(let l of this.eduList[this.firstIndex].subList[e].subList)l.active="",this.lastList.push(l);s=this.nextList;break;case"last":this.lastIndex=e,s=this.lastList;break;default:this.firstIndex=e,this.lastIndex="",this.nextIndex="",this.nextList=[];for(let l of this.eduList[e].subList)l.active="",this.nextList.push(l);this.lastList=[],s=this.firstList;break}for(let l of s)l.active="";s[e].active="active"},modifyItem(e,t){t||(t="first"),this.step=t,this.registTitle=this.getStepTitle(t);const l=this.getStepDataList(t)[e];this.name=l.name,this.showKey=l.id,this.registShow=!0},deleteItem(e,t){const s=this.getStepTitle(t),l={type:"confirm",message:s+"을 삭제하시겠습니까?",doAction:()=>{let n=this.getStepDataList(t);switch(n.splice(e,1),t){default:this.firstIndex==e&&(this.nextList=[],this.lastList=[],this.firstIndex="",this.lastIndex="",this.nextIndex="");break;case"next":this.nextIndex==e&&(this.lastList=[],this.lastIndex="",this.nextIndex="");break;case"last":this.lastIndex==e&&(this.lastIndex="");break}this.setEduList(t,n),this.updateData(s+"가 삭제 되었습니다")}};this.emitter.emit("modalOpen",l)},getStepTitle(e){let t="";switch(e){case"next":t="2차 카테고리";break;case"last":t="과목";break;default:t="1차 카테고리";break}return t},getStepDataList(e){let t=[];switch(e){case"next":t=this.nextList;break;case"last":t=this.lastList;break;default:t=this.firstList;break}return t},setEduList(e,t){switch(e){default:this.eduList=t;break;case"next":this.eduList[this.firstIndex].subList=t;break;case"last":this.eduList[this.firstIndex].subList[this.nextIndex].subList=t;break}},validate(){if(!this.form)return;let e=!1,t=this.getStepDataList(this.step);for(const l of t)if(l.id==this.showKey){l.name=this.name,e=!0;break}switch(e||t.push({id:this.showKey,name:this.name,use:"yes",subList:[]}),this.step){case"next":this.eduList[this.firstIndex].subList=t;break;case"last":this.eduList[this.firstIndex].subList[this.nextIndex].subList=t;break;default:this.eduList=t;break}const s={edu:JSON.stringify(this.eduList)};this.serverFlag||(this.serverFlag=!0,this.emitter.emit("overlay","open"),k.post(y,s,l=>{this.emitter.emit("overlay","hide"),this.registShow=!1,this.serverFlag=!1;let n={message:"설정정보가 저장 되었습니다"};this.name="",this.showKey="",this.emitter.emit("modalOpen",n)}))},updateData(e){const t={edu:JSON.stringify(this.eduList)};this.serverFlag||(this.serverFlag=!0,this.emitter.emit("overlay","open"),k.post(y,t,s=>{if(this.emitter.emit("overlay","hide"),this.serverFlag=!1,e){let l={message:e};this.emitter.emit("modalOpen",l)}}))},openTextbook(e){switch(e){case"next":if(!this.firstIndex.toString()){this.emitter.emit("modalOpen",{message:"1차 카테고리를 선택하세요"});return}break;case"last":if(!this.nextIndex.toString()){this.emitter.emit("modalOpen",{message:"학년을 선택하세요"});return}break}this.step=e,this.textbookShow=!0}}},S=e=>(N("data-v-c5ff8e27"),e=e(),O(),e),A={class:"page-container"},z={class:"memberSet-container"},G={class:"memberSet-list"},B={class:"memberSet-list-header"},U=S(()=>i("div",{class:"memberSet-title",style:{padding:"3px 0 0 0"}},"1차 카테고리",-1)),J={class:"memberSet-list-body"},M={class:"main-memberSet"},P={class:"main-li"},R={style:{"min-width":"43px"}},Y=["onClick"],j={style:{"min-width":"70px"}},q={class:"memberSet-list"},H={class:"memberSet-list-header"},Q=S(()=>i("div",{class:"memberSet-title",style:{padding:"3px 0 0 0"}},"2차 카테고리",-1)),W={class:"memberSet-list-body"},X={class:"main-memberSet"},Z={class:"main-li"},$={style:{"min-width":"43px"}},tt=["onClick"],et={style:{"min-width":"70px"}},st={class:"modal-layout",style:{background:"#fff"}},it={class:"modal-header"},at={class:"modal-title"},lt={class:"modal-body"},nt={class:"memberSet-regist"},ot={class:"table-ul"},rt={class:"label-input"},dt={class:"button-row"};function ht(e,t,s,l,n,o){const g=f("v-btn"),d=f("font-awesome-icon"),C=f("v-text-field"),T=f("v-form"),D=f("v-dialog");return c(),_("div",A,[i("div",z,[i("div",G,[i("div",B,[U,u(g,{class:"white-button",onClick:t[0]||(t[0]=a=>o.newKey("first")),variant:"outlined",style:{"min-width":"60px",width:"60px"}},{default:v(()=>[b(" 등록 ")]),_:1})]),i("div",J,[(c(!0),_(x,null,I(n.firstList,(a,r)=>(c(),_("ul",M,[i("li",P,[i("div",{class:w("main-data "+a.active),style:{cursor:"pointer"}},[i("div",R,[u(d,{onClick:h=>o.upItem(r),icon:"fa-solid fa-up-long",style:{"font-size":"12pt",color:"deepskyblue"}},null,8,["onClick"]),u(d,{onClick:h=>o.downItem(r),style:{"margin-left":"5px","font-size":"12pt",color:"palevioletred"},icon:"fa-solid fa-down-long"},null,8,["onClick"])]),i("div",{class:"gname",onClick:h=>o.choiceSns(r)},L(a.name),9,Y),i("div",j,[a.id!="ele"&&a.id!="mid"&&a.id!="high"?(c(),m(d,{key:0,onClick:h=>o.modifyItem(r),style:{"margin-right":"10px"},icon:"fa-solid fa-pen"},null,8,["onClick"])):p("",!0),a.use=="yes"?(c(),m(d,{key:1,onClick:h=>o.useItem(r),icon:"fa-solid fa-eye"},null,8,["onClick"])):(c(),m(d,{key:2,onClick:h=>o.useItem(r),icon:"fa-solid fa-eye-slash"},null,8,["onClick"])),a.id!="ele"&&a.id!="mid"&&a.id!="high"?(c(),m(d,{key:3,onClick:h=>o.deleteItem(r,"first"),style:{"margin-left":"10px"},icon:"fa-solid fa-trash"},null,8,["onClick"])):p("",!0)])],2)])]))),256))])]),i("div",q,[i("div",H,[Q,u(g,{class:"white-button",onClick:t[1]||(t[1]=a=>o.newKey("next")),variant:"outlined",style:{"min-width":"60px",width:"60px"}},{default:v(()=>[b(" 등록 ")]),_:1})]),i("div",W,[(c(!0),_(x,null,I(n.nextList,(a,r)=>(c(),_("ul",X,[i("li",Z,[i("div",{class:w("main-data "+a.active),style:{cursor:"pointer"}},[i("div",$,[u(d,{onClick:h=>o.upItem(r,"next"),icon:"fa-solid fa-up-long",style:{"font-size":"12pt",color:"deepskyblue"}},null,8,["onClick"]),u(d,{onClick:h=>o.downItem(r,"next"),style:{"margin-left":"5px","font-size":"12pt",color:"palevioletred"},icon:"fa-solid fa-down-long"},null,8,["onClick"])]),i("div",{class:"gname",onClick:h=>o.choiceSns(r,"next")},L(a.name),9,tt),i("div",et,[a.id>6?(c(),m(d,{key:0,onClick:h=>o.modifyItem(r,"next"),style:{"margin-right":"10px"},icon:"fa-solid fa-pen"},null,8,["onClick"])):p("",!0),a.use=="yes"?(c(),m(d,{key:1,onClick:h=>o.useItem(r,"next"),icon:"fa-solid fa-eye"},null,8,["onClick"])):(c(),m(d,{key:2,onClick:h=>o.useItem(r,"next"),icon:"fa-solid fa-eye-slash"},null,8,["onClick"])),a.id>6?(c(),m(d,{key:3,onClick:h=>o.deleteItem(r,"next"),style:{"margin-left":"10px"},icon:"fa-solid fa-trash"},null,8,["onClick"])):p("",!0)])],2)])]))),256))])])]),u(D,{modelValue:n.registShow,"onUpdate:modelValue":t[5]||(t[5]=a=>n.registShow=a),width:"500",persistent:"",style:{"z-index":"100"}},{default:v(()=>[i("div",st,[i("div",it,[i("div",at,L(n.registTitle)+" 등록 ",1),i("div",{class:"modal-close",onClick:t[2]||(t[2]=a=>n.registShow=!1)},[u(d,{icon:"fa-solid fa-circle-xmark"})])]),i("div",lt,[i("div",nt,[i("div",null,[u(T,{modelValue:n.form,"onUpdate:modelValue":t[4]||(t[4]=a=>n.form=a),novalidate:"",onSubmit:E(o.validate,["prevent"])},{default:v(()=>[i("div",null,[i("ul",ot,[i("li",null,[i("div",rt,[u(C,{modelValue:n.name,"onUpdate:modelValue":t[3]||(t[3]=a=>n.name=a),ref:"name",variant:"outlined",density:"compact",rules:[a=>!!a||n.registTitle+"을 입력해주세요"],placeholder:n.registTitle+"을 입력해주세요"},null,8,["modelValue","rules","placeholder"])])])])]),i("div",dt,[u(g,{class:"submit-button",type:"submit"},{default:v(()=>[b(" 정보 저장")]),_:1})])]),_:1},8,["modelValue","onSubmit"])])])])])]),_:1},8,["modelValue"])])}const ft=V(K,[["render",ht],["__scopeId","data-v-c5ff8e27"]]);export{ft as default};
