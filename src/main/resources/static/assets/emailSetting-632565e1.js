import{_ as T,O as w,r as d,o as l,c as a,a as e,F as g,b,t as c,e as m,w as f,i as S,d as L,n as V,h as u,j as v,k as y,N as x,p as N,g as M}from"./index-e96a63ea.js";import{a as I,w as F,x as U}from"./urls-dc95fcef.js";import{Q as A}from"./vue-quill.snow-e5675dfb.js";import{J as D}from"./jquery-d8551b6e.js";import"./axios-c24e582b.js";const R={components:{QuillEditor:A},setup(){return{myEditor:w(null)}},data(){return{memberList:[{name:"회원가입시 축하메일",use:"yes",id:"join",content:""},{name:"비밀번호찾기시 인증번호",use:"yes",id:"findpass",content:""}],replaceCodes:{join:[{code:"uid",name:"회원 아이디"},{code:"name",name:"회원 이름"},{code:"joinDate",name:"가입일"}],findpass:[{code:"authCode",name:"인증번호"}]},urlCodes:{join:{code:"joinAuthUrl",name:"인증 URL"},findpass:{code:"findPassUrl",name:"비밀번호 변경 URL"}},agrees:{},memberRegistTitle:"",agreeId:"join",subject:"",content:"",use:"yes",form:null,serverFlag:!1,editorOption:{placeholder:"내용을 입력하세요",theme:"snow",modules:{toolbar:{container:[[{header:1},{header:2}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["image"],["link"],["clean"]]}}}}},created(){this.getData()},methods:{getData(){this.serverFlag||(this.serverFlag=!0,this.agrees={},I.post(F,{},n=>{this.serverFlag=!1;let t={};n.setting&&n.setting.email&&(t=JSON.parse(n.setting.email));for(let s of this.memberList)t[s.id]?(s.use=t[s.id].use,s.content=t[s.id].content,s.subject=t[s.id].subject,this.agrees[s.id]=s):this.agrees[s.id]=s;this.choiceMember(this.memberList[0].id)}))},choiceMember(n){let t={};for(let s of this.memberList)s.id==n?(s.active="active",t=s):s.active="";this.agreeId=t.id,this.memberRegistTitle=t.name,this.content=t.content,this.subject=t.subject,this.use=t.use},onEditorChange(n){this.content=this.myEditor.getHTML()},validate(){if(!this.agreeId||!this.form)return;if(this.agrees[this.agreeId].use=this.use,this.agrees[this.agreeId].subject=this.subject,!this.content){let t={message:"메일 내용을 입력하세요"};this.emitter.emit("modalOpen",t);return}this.agrees[this.agreeId].content=this.content;let n={email:JSON.stringify(this.agrees)};console.log(this.agrees),!this.serverFlag&&(this.serverFlag=!0,this.emitter.emit("overlay","open"),I.post(U,n,t=>{if(this.serverFlag=!1,this.emitter.emit("overlay","hide"),t.data){for(let r of this.memberList)r.id==this.agreeId&&(r.content=this.content,r.use=this.use,r.subject=this.subject);let s={message:this.memberRegistTitle+" 정보가 저장 되었습니다"};this.emitter.emit("modalOpen",s)}}))}},mounted(){},updated(){D(".quill-content-box .ql-editor").css({"min-height":"500px","max-height":"500px"})}},p=n=>(N("data-v-1c4e7f89"),n=n(),M(),n),O={class:"page-container"},Q={class:"member-container"},q={class:"member-list"},B=p(()=>e("div",{class:"member-list-header"},[e("div",{class:"member-title",style:{padding:"3px 0 0 0"}},"설정 목록")],-1)),J={class:"member-list-body"},P={class:"main-member"},G={class:"main-li"},z=["onClick"],H={class:"member-regist"},K={key:0},W={class:"member-title"},X={class:"table-ul"},Y=p(()=>e("div",{class:"label"}," 사용여부 ",-1)),Z={class:"label-input"},$={class:"radio-box",style:{"padding-top":"20px"}},ee={style:{"padding-right":"25px"}},te=p(()=>e("div",{class:"label",style:{"margin-top":"-10px"}}," 치환코드 ",-1)),se={class:"label-input",style:{display:"flex"}},ie={class:"list-box"},oe={class:"input-text-box",style:{width:"900px","padding-top":"20px"}},ne={class:"quill-content-box",style:{width:"900px","margin-top":"20px"}},le={class:"button-row"};function ae(n,t,s,r,o,h){const _=d("font-awesome-icon"),j=d("v-text-field"),E=d("QuillEditor"),k=d("v-btn"),C=d("v-form");return l(),a("div",O,[e("div",Q,[e("div",q,[B,e("div",J,[(l(!0),a(g,null,b(o.memberList,(i,re)=>(l(),a("ul",P,[e("li",G,[e("div",{class:V("main-data "+i.active)},[e("div",{class:"gname",onClick:de=>h.choiceMember(i.id)},[u(c(i.name)+" ",1),i.use=="yes"?(l(),v(_,{key:0,icon:"fa-solid fa-eye"})):(l(),v(_,{key:1,icon:"fa-solid fa-eye-slash"}))],8,z)],2)])]))),256))])]),e("div",H,[o.agreeId?(l(),a("div",K,[e("div",W,c(o.memberRegistTitle),1),m(C,{modelValue:o.form,"onUpdate:modelValue":t[3]||(t[3]=i=>o.form=i),novalidate:"",onSubmit:S(h.validate,["prevent"])},{default:f(()=>[e("ul",X,[e("li",null,[Y,e("div",Z,[e("div",$,[e("label",ee,[y(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=i=>o.use=i),value:"yes"},null,512),[[x,o.use]]),u(" 사용 ")]),e("label",null,[y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>o.use=i),type:"radio",value:"no"},null,512),[[x,o.use]]),u(" 사용안함 ")])])])]),e("li",null,[te,e("div",se,[(l(!0),a(g,null,b(o.replaceCodes[o.agreeId],i=>(l(),a("div",ie,c(i.name)+" : [:"+c(i.code)+":] ",1))),256))])]),e("li",null,[e("div",oe,[m(j,{variant:"outlined",density:"compact",label:"메일 제목",rules:[i=>!!i||"메일제목을 입력해주세요"],placeholder:"메일제목을 입력해주세요",modelValue:o.subject,"onUpdate:modelValue":t[2]||(t[2]=i=>o.subject=i)},null,8,["rules","modelValue"])])])]),e("div",ne,[m(E,{ref:"myEditor",content:o.content,options:o.editorOption,contentType:"html",onEditorChange:h.onEditorChange},null,8,["content","options","onEditorChange"])]),e("div",le,[m(k,{class:"submit-button",type:"submit",style:{width:"250px"}},{default:f(()=>[u(c(o.memberRegistTitle)+" 저장 ",1)]),_:1})])]),_:1},8,["modelValue","onSubmit"])])):L("",!0)])])])}const _e=T(R,[["render",ae],["__scopeId","data-v-1c4e7f89"]]);export{_e as default};
