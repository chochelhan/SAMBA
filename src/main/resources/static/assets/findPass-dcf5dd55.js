import{a as c}from"./apiService-77935b08.js";import{P as I,Q as E,R as V}from"./urls-04ad3523.js";import{_ as y,r as d,o as v,c as b,e as u,w as m,i as g,j as U,d as A,a,n as _,t as S,p as x,g as N}from"./index-e96a63ea.js";import"./axios-c24e582b.js";import"./auth-eef4144a.js";const k={name:"FindPass",data(){return{email:"",authNumber:"",insertFlag:!1,form:null,passform:null,active:"",passActive:"",authActive:"",time:"",timeInterval:null,authResult:!1,upass:"",reUpass:"",upassErrorFlag:!1}},created(){},methods:{inputCheck(){this.email&&this.authNumber?this.active="active":this.active=""},upassErrors(t){if(this.passActive="",this.upassErrorFlag=!1,!t)return"비밀번호를 입력하세요";if(t.length<6||t.length>20)return"비밀번호는 6~20자 사이로 입력하세요";let e=/\d{1}/,i=e.test(t);return i?(e=/[a-zA-Z]/,i=e.test(t),i?(e=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/,i=e.test(t),i?(this.upassErrorFlag=!0,"비밀번호에 한글을 사용할수 없습니다"):(this.reUpass&&!this.upassErrorFlag?this.upass==this.reUpass?this.passActive="active":this.passActive="":this.passActive="",!0)):(this.upassErrorFlag=!0,"비밀번호는 영문을 포함해야 합니다")):(this.upassErrorFlag=!0,"비밀번호는 한개이상의 숫자를 포함해야 합니다")},reUpassErrors(t){return this.upassErrorFlag=!1,this.passActive="",t?this.upass!=t?(this.upassErrorFlag=!0,"비밀번호와 비밀번호 확인이 다릅니다"):(this.passActive=this.upass&&!this.upassErrorFlag?"active":"",!0):"비밀번호를 다시 입력하세요"},validate(){if(!this.form)return;const t={email:this.email,authNumber:this.authNumber};this.emitter.emit("overlay","open"),c.post(I,t,e=>{this.authResult=!1,this.emitter.emit("overlay","hide");let i=e.status,o={};i=="success"?o={message:"인증이 완료되었습니다",doAction:()=>{this.authResult=!0,this.timeInterval&&clearInterval(this.timeInterval),this.authActive=""}}:o={message:"잘못된 인증번호 입니다"},this.emitter.emit("modalOpen",o)})},passValidate(){if(!this.passform)return;const t={upass:this.upass,email:this.email};this.emitter.emit("overlay","open"),c.post(E,t,e=>{this.emitter.emit("overlay","hide");let i=e.status,o={};i=="success"?o={message:"비밀번호 변경이 완료되었습니다",doAction:()=>{this.$router.push("/memberLogin")}}:o={message:"잘못된 접근 입니다"},this.emitter.emit("modalOpen",o)})},setTime(){this.authActive="active";let t=180;this.time="3:00",this.timeInterval=setInterval(()=>{if(t--,t<1)clearInterval(this.timeInterval),this.authActive="";else{const e=parseInt(t/60);let i=t%60;i<10&&(i="0"+i),this.time=e+":"+i}},1e3)},getAuthNumber(){if(this.authResult=!1,this.authActive!="active")if(this.email){const t={email:this.email};this.emitter.emit("overlay","open"),c.post(V,t,e=>{this.emitter.emit("overlay","hide");let i=e.status,o={};if(i=="success")this.setTime();else{let s=e.code,r;switch(s){case"noEmailSetting":r="이메일 설정이 정의되지 않았습니다 관리자에게 문의바랍니다";break;case"noAuth":r="미인증된 회원정보 입니다";break;default:r="잘못된 이메일 입니다";break}o={message:r},this.emitter.emit("modalOpen",o)}})}else{let t={message:"이메일 주소를 입력해주세요"};this.emitter.emit("modalOpen",t)}}},beforeUnmount(){this.timeInterval&&clearInterval(this.timeInterval)}},n=t=>(x("data-v-4b4119bf"),t=t(),N(),t),F={class:"login-container"},R=n(()=>a("p",{class:"page-title"},"비밀번호 찾기",-1)),w={class:"input-box"},B=n(()=>a("div",{class:"label"},"이메일",-1)),P={class:"find-box"},C=n(()=>a("span",null,"인증번호 요청",-1)),M={class:"input-box"},L=n(()=>a("div",{class:"label"},"인증번호",-1)),D={key:0,class:"find-box"},O={class:"time"},T={class:"button-row"},z=n(()=>a("span",null,"확인",-1)),H={class:"input-ul"},j={style:{"margin-bottom":"10px"}},Q=n(()=>a("div",{class:"label"},"새 비밀번호",-1)),W=n(()=>a("div",{class:"label"},"새 비밀번호 확인",-1)),Y={class:"button-row",style:{"margin-bottom":"70px"}},Z=n(()=>a("span",null,"비밀번호 변경",-1));function q(t,e,i,o,s,r){const h=d("v-btn"),p=d("v-text-field"),f=d("v-form");return v(),b("div",F,[R,u(f,{novalidate:"",modelValue:s.form,"onUpdate:modelValue":e[3]||(e[3]=l=>s.form=l),onSubmit:g(r.validate,["prevent"])},{default:m(()=>[a("div",w,[B,a("div",P,[u(h,{variant:"outlined",type:"button",class:_("rightButton "+s.authActive),onClick:e[0]||(e[0]=l=>r.getAuthNumber())},{default:m(()=>[C]),_:1},8,["class"])]),u(p,{modelValue:s.email,"onUpdate:modelValue":e[1]||(e[1]=l=>s.email=l),variant:"outlined",rules:[l=>!!l||"이메일을 입력해주세요"],onInput:r.inputCheck,placeholder:"이메일을 입력해주세요"},null,8,["modelValue","rules","onInput"])]),a("div",M,[L,u(p,{readonly:s.authActive!="active",modelValue:s.authNumber,"onUpdate:modelValue":e[2]||(e[2]=l=>s.authNumber=l),variant:"outlined",rules:[l=>!!l||"인증번호를 입력해주세요"],onInput:r.inputCheck,placeholder:"인증번호를 입력해주세요"},null,8,["readonly","modelValue","rules","onInput"]),s.authActive?(v(),b("div",D,[a("span",O," 남은시간 "+S(s.time),1)])):A("",!0)]),a("div",T,[u(h,{type:"submit",class:_("submitButton "+s.active),variant:"tonal"},{default:m(()=>[z]),_:1},8,["class"])])]),_:1},8,["modelValue","onSubmit"]),s.authResult?(v(),U(f,{key:0,novalidate:"",modelValue:s.passform,"onUpdate:modelValue":e[6]||(e[6]=l=>s.passform=l),onSubmit:g(r.passValidate,["prevent"])},{default:m(()=>[a("ul",H,[a("li",j,[Q,u(p,{type:"password",variant:"outlined",modelValue:s.upass,"onUpdate:modelValue":e[4]||(e[4]=l=>s.upass=l),rules:[r.upassErrors],placeholder:"새 비밀번호를 입력해주세요"},null,8,["modelValue","rules"])]),a("li",null,[W,u(p,{type:"password",variant:"outlined",modelValue:s.reUpass,"onUpdate:modelValue":e[5]||(e[5]=l=>s.reUpass=l),rules:[r.reUpassErrors],placeholder:"다시 입력해주세요"},null,8,["modelValue","rules"])])]),a("div",Y,[u(h,{type:"submit",class:_("submitButton "+s.passActive),variant:"tonal"},{default:m(()=>[Z]),_:1},8,["class"])])]),_:1},8,["modelValue","onSubmit"])):A("",!0)])}const ee=y(k,[["render",q],["__scopeId","data-v-4b4119bf"]]);export{ee as default};
