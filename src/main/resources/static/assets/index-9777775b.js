import{a as m,A as E,b as x,c as C}from"./urls-dc95fcef.js";import{J as f}from"./jquery-d8551b6e.js";import{_ as k,r as v,o as a,c,a as s,d as M,h as A,F as I,b as y,n as w,e as d,t as b,j as h,p as T,g as U,w as S,i as R,G as V}from"./index-e96a63ea.js";import"./axios-c24e582b.js";const O=[{name:"기본정보 설정",icon:"fa-solid fa-gear",id:"setting",active:"no",subMenuList:[{name:"카테고리 설정",icon:"",url:"/admin/setting/eduset",active:"no"},{name:"회원가입 SNS 설정",icon:"",url:"/admin/setting/memberset",active:"no"},{name:"이메일 설정",icon:"",url:"/admin/setting/emailset",active:"no"},{name:"약관 설정",icon:"",url:"/admin/setting/memberAgree",active:"no"}]},{name:"회원 관리",icon:"fa-solid fa-user-group",id:"member",active:"no",subMenuList:[{name:"회원 조회",icon:"",url:"/admin/member/memberList/student",active:"no"}]},{name:"AI STORE 관리",icon:"fa-solid fa-briefcase",id:"edu",active:!1,subMenuList:[{name:"AI STORE 목록",icon:"",url:"/admin/edu/eduList"},{name:"AI STORE 등록",icon:"",url:"/admin/edu/eduRegist"}]},{name:"문의사항 관리",icon:"fa-regular fa-clipboard",id:"run",active:!1,subMenuList:[{name:"문의사항 관리",icon:"",url:"/admin/run/articleList"}]}];const P={watch:{$route(e,t){switch(e.name){case"adminMain":case"adminUpdate":this.subMenuTitle="";let i=0;for(let n of this.menuList){n.active&&f(".submenu-ul").eq(i).slideUp(200),n.active="";for(let o of n.subMenuList)o.active="";i++}break}},getSiteEnv(e){this.siteEnv=e},getPageMenuName(e){e&&(this.subMenuTitle=e,this.setPageMenuName(""))}},data(){return{menuList:[],currentUrl:"",subMenuTitle:"",activeIndex:0,activeFlag:!1,siteEnv:"",superAdmin:!1}},created(){this.currentUrl=this.$route.path,this.getSiteEnv?this.siteEnv=this.getSiteEnv:setTimeout(()=>{this.siteEnv=this.getSiteEnv},200),JSON.parse(sessionStorage.getItem("adminInfo")).role!="ROLE_MANAGER"&&(this.superAdmin=!0),this.setMenu()},methods:{setMenu(){this.menuList=[];for(const t of O)this.menuList.push(t);let e=0;for(let t of this.menuList){for(let i of t.subMenuList)this.currentUrl==i.url&&(t.active="active",i.active="active",this.activeFlag=!0,this.activeIndex=e,this.subMenuTitle=i.name);e++}},goAdminUpdate(){this.$router.push("/admin/adminUpdate")},showMenu(e){this.menuList[e].active=="active"?(f(".submenu-ul").eq(e).slideUp(200),this.menuList[e].active=""):this.goSubMenu(e,0)},goSubMenu(e,t){let i=0;for(let o of this.menuList){o.active="",e!=i&&f(".submenu-ul").eq(i).slideUp(200),i++;for(let u of o.subMenuList)u.active=""}f(".submenu-ul").eq(e).slideDown(200),this.menuList[e].active="active",this.menuList[e].subMenuList[t].active="active",this.subMenuTitle=this.menuList[e].subMenuList[t].name;const n=this.menuList[e].subMenuList[t].url;n&&this.goPage(n)},goPageFromMain(e){this.currentUrl=e.url,this.setMenu()},goPage(e){this.$router.push(e).catch(()=>{})},logout(){this.emitter.emit("overlay","open"),m.post(E,{},e=>{this.emitter.emit("overlay","hide"),sessionStorage.setItem("authToken",""),sessionStorage.setItem("adminInfo",""),m.setAdminInfo(),location.href="/admin"})}},mounted(){this.activeFlag&&(this.activeFlag=!1,f(".submenu-ul").eq(this.activeIndex).slideDown(200))},updated(){this.activeFlag&&(this.activeFlag=!1,f(".submenu-ul").eq(this.activeIndex).slideDown(200))}},L=e=>(T("data-v-172b58c1"),e=e(),U(),e),D={class:"layout-page",id:"site-base-layout"},F={class:"layout-header"},q={class:"top-box"},G={class:"top-info"},B={class:"top-setting"},J={class:"top-setting-ul"},j={class:"layout-container"},z={class:"left-menu"},H=L(()=>s("span",{class:"flow"},"chatGPT",-1)),Q=L(()=>s("span",{class:"shop"},"Center",-1)),K={class:"scroll-area"},W={class:"large-menu"},X=["onClick"],Y={class:"large-menu-item-title"},Z={class:"submenu-ul"},ee=["onClick"],te={class:"layout-contents"},se={key:0,class:"submenu-title"},ie=L(()=>s("div",{class:"layout-bottom"},null,-1));function ne(e,t,i,n,o,u){const r=v("font-awesome-icon"),p=v("routerView");return a(),c("div",D,[s("div",F,[s("div",q,[s("div",G,[s("span",{onClick:t[0]||(t[0]=l=>u.goPage("/"))},"사용자 페이지")]),s("div",B,[s("ul",J,[o.superAdmin?(a(),c("li",{key:0,onClick:t[1]||(t[1]=l=>u.goAdminUpdate())},"관리자 정보수정")):M("",!0),s("li",{onClick:t[2]||(t[2]=l=>u.logout())},"로그아웃")])])])]),s("div",j,[s("div",z,[s("div",{class:"company-info",onClick:t[3]||(t[3]=l=>u.goPage("/admin"))},[H,A(),Q]),s("div",K,[s("ul",W,[(a(!0),c(I,null,y(o.menuList,(l,_)=>(a(),c("li",{class:w(["large-menu-item",l.active])},[s("div",{class:"large-menu-box",onClick:g=>u.showMenu(_)},[d(r,{class:"menu-icon",icon:l.icon},null,8,["icon"]),s("span",Y,b(l.name),1),l.active?(a(),h(r,{key:0,class:"icon",icon:"fa-solid fa-angle-up"})):(a(),h(r,{key:1,class:"icon",icon:"fa-solid fa-angle-down"}))],8,X),s("ul",Z,[(a(!0),c(I,null,y(l.subMenuList,(g,$)=>(a(),c("li",{onClick:fe=>u.goSubMenu(_,$),class:w(g.active)},[d(r,{class:"sub-icon",icon:"fa-solid fa-square"}),s("span",null,b(g.name),1)],10,ee))),256))])],2))),256))])])]),s("div",te,[o.subMenuTitle?(a(),c("div",se,b(o.subMenuTitle),1)):M("",!0),d(p)])]),ie])}const oe=k(P,[["render",ne],["__scopeId","data-v-172b58c1"]]);const ae={data:()=>({uid:"",upass:""}),methods:{async validate(){const{valid:e}=await this.$refs.form.validate();if(!e)return;const t={uid:this.uid,upass:this.upass};this.emitter.emit("overlay","open"),m.post(x,t,i=>{this.emitter.emit("overlay","hide");let n=i.status,o={};n=="success"?(sessionStorage.setItem("authToken",i.access_token),sessionStorage.setItem("adminInfo",JSON.stringify(i.memberInfo)),m.authToken=i.access_token,m.setAdminInfo(),o={message:"로그인 되었습니다",doAction:()=>{this.$emit("loginResult",!0)}}):o={message:"잘못된 아이디 또는 비밀번호입니다"},this.emitter.emit("modalOpen",o)})}}},N=e=>(T("data-v-c8748f5a"),e=e(),U(),e),le={class:"login-container"},ue=N(()=>s("p",{class:"login-title"},"ADMIN LOGIN",-1)),ce={class:"w-full"},re=N(()=>s("div",{class:"w-full flex flex-row wrap-checkbox justify-between my-1 px-2",style:{"margin-top":"-20px","padding-bottom":"15px"}},[s("div",{class:"flex flex-row items-center"},[s("div",{style:{"padding-left":"10px"}})])],-1)),de={class:"button-row"};function me(e,t,i,n,o,u){const r=v("v-text-field"),p=v("v-btn"),l=v("v-form");return a(),c("div",le,[ue,d(l,{onSubmit:R(u.validate,["prevent"]),ref:"form"},{default:S(()=>[s("div",ce,[d(r,{modelValue:e.uid,"onUpdate:modelValue":t[0]||(t[0]=_=>e.uid=_),rules:[!!e.uid||"아이디를 입력하세요"],variant:"outlined",label:"아이디",placeholder:"아이디를 입력해주세요"},null,8,["modelValue","rules"]),d(r,{type:"password",autocomplete:"on",variant:"outlined",rules:[!!e.upass||"비밀번호를 입력하세요"],label:"비밀번호",modelValue:e.upass,"onUpdate:modelValue":t[1]||(t[1]=_=>e.upass=_),placeholder:"비밀번호를 입력해주세요"},null,8,["rules","modelValue"])]),re,s("div",de,[d(p,{type:"submit",style:{background:"#000",color:"#fff",height:"47px","border-radius":"5px",width:"100%"}},{default:S(()=>[A(" 로그인 ")]),_:1})])]),_:1},8,["onSubmit"])])}const _e=k(ae,[["render",me],["__scopeId","data-v-c8748f5a"]]),be={__name:"index",setup(e){m.setAdminInfo();const t=V({login:!1});m.post(C,{},n=>{n.data=="success"?t.login=!0:t.login=!1});function i(n){t.login=n}return(n,o)=>t.login?(a(),h(oe,{key:0,onLogoutResult:i})):(a(),h(_e,{key:1,onLoginResult:i}))}};export{be as default};
