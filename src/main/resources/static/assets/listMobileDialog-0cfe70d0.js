import{a as T}from"./apiService-77935b08.js";import{r as I}from"./urls-04ad3523.js";import{e as L}from"./eduAction-d64f11a0.js";import{_ as D,m as H,f as q,r as p,o as n,c as a,a as t,h as g,F as f,b as m,e as b,t as d,w as v,j as x,d as u,n as N,k as A,v as E,E as j,p as R,g as V}from"./index-e96a63ea.js";import{u as Q}from"./setting-932355f8.js";import{U as B}from"./util-75dcb7cf.js";import"./jquery-d8551b6e.js";import{S as U}from"./search-4f2fc610.js";import"./axios-c24e582b.js";import"./auth-eef4144a.js";const O={components:{SEARCH:U},computed:{...H(L,["leftMenuList","basketProblemList","basketProblemInfoList"])},watch:{leftMenuList(e){e.length>0&&this.setNaviTitle()}},data(){return{util:B,searchType:"",problemList:[],subId:"",id:"",textBookCode:"",pcView:!0,titles:[],schoolTypeItems:{},gradeItems:{},gtypeItems:{},ids:[],isBasketIds:[],settingflag:!1}},created(){this.setInit()},methods:{...q(L,["mtpBasketProblemList","mtpBasketProblemInfoList"]),close(){this.$router.back()},settingData(){this.gtypeItems=this.setting.gtypes,this.schoolTypeItems=this.setting.schoolTypes,this.settingflag=!0},setInit(){if(this.searchType=this.$route.params.typeId,this.subId=this.$route.params.subId,this.id=this.$route.params.id,this.$route.params.textBook!="none"?this.textBookCode=this.$route.params.textBook:this.textBookCode="",this.ids=[],this.isBasketIds=[],this.leftMenuList.length>0&&this.setNaviTitle(),this.setting=Q(),this.setting.serverResponse)this.settingData(),this.getData();else{const e=setInterval(()=>{this.setting.serverResponse&&(this.settingData(),this.getData(),clearInterval(e))},100)}},setBasket(){if(this.ids.length<1){const l={message:"대상을 선택하세요"};this.emitter.emit("modalOpen",l);return}const e=[],s=[];for(const l of this.basketProblemList)this.isBasketIds.filter(i=>i===l).length<1&&e.push(l);for(const l of this.basketProblemInfoList)this.isBasketIds.filter(i=>i===l.id).length<1&&s.push(l);for(const l of this.ids){let c=this.problemList.filter(i=>i.id===l);c.length>0&&(e.push(l),s.push(c[0]))}this.mtpBasketProblemInfoList(s),this.mtpBasketProblemList(e),this.close()},setNaviTitle(){const e=[];for(const s of this.leftMenuList)if(s.id==this.searchType){e.push({type:"",text:s.text});for(const l of s.items)if(l.value==this.subId&&(e.push({type:"",text:l.title}),this.id!="none")){for(const c of l.items)if(c.value==this.id&&(e.push({type:"",text:c.title}),this.textBookCode&&c.items))for(const i of c.items)i.value==this.textBookCode&&e.push({type:"",text:i.title})}}e[e.length-1].type="bold",this.titles=e},getData(){const e={id:this.id.toString(),subId:this.subId,page:"1",limit:"1000",searchType:this.searchType,textBookCode:this.textBookCode,actTarget:"student",listType:"regist"};T.post(I,e,s=>{this.setProblemList(s)})},doSearch(e){const s={page:"1",limit:"1000",searchType:"all",actTarget:"student",gtype:e.gtype,schType:e.schoolType,grd:e.grade.toString(),textBookCode:e.textbook,keyword:e.keyword};this.emitter.emit("overlay","open"),T.post(I,s,l=>{this.emitter.emit("overlay","hide"),this.setProblemList(l)})},setProblemList(e){this.problemList=[];for(let s of e.list){this.basketProblemList.filter(_=>s.id===_).length>0&&(this.isBasketIds.push(s.id),this.ids.push(s.id)),s.show=!1,s.gtype=this.gtypeItems[s.gtype.toString()];let c=B.getSchoolTypeInfo(s,this.schoolTypeItems);s.schoolInfo=c.info,s.textbookName=c.book,s.schoolType=this.schoolTypeItems[s.schoolType.toString()]?this.schoolTypeItems[s.schoolType.toString()].title:"",s.target=s.actTarget=="student"?"학생":"선생님";const i=JSON.parse(s.questions);i.questions?(s.questionType=i.questionType,s.questionList=i.questions,s.addQuestions=i.addQuestions):(s.questionType="none",s.questionList=i,s.addQuestions=[]),this.problemList.push(s)}}}},r=e=>(R("data-v-8b4c0346"),e=e(),V(),e),z={class:"mobile-layout"},F={class:"mobile-header"},G={class:"mobile-title",style:{color:"#000"}},J={class:"mobile-sub-title"},K={class:"mobile-button"},W={class:"mobile-close"},X={class:"mobile-body"},Y={class:"content-sub-title-box"},Z={class:"select-title"},$=r(()=>t("span",null,"담기",-1)),tt={class:"page-body"},st={class:"scroll-list"},et={class:"edu-ul"},ot={class:"checkbox"},it=["value"],lt={class:"subject-box"},nt={class:"part"},at={class:"slide-down-box"},ct={class:"close-icon"},dt={class:"subject-ul"},rt={class:"col"},ht=r(()=>t("div",{class:"label"},"학교급",-1)),ut={class:"value"},_t=r(()=>t("div",{class:"label"},"분야",-1)),pt={class:"value"},bt={class:"col"},ft=r(()=>t("div",{class:"label"},"교과명",-1)),mt={class:"value"},vt=r(()=>t("div",{class:"label"},"활동대상",-1)),yt={class:"value"},gt={key:0},kt=r(()=>t("div",{class:"label"},"성취기준",-1)),Tt=["innerHTML"],It=r(()=>t("div",{class:"label"},"학습주제",-1)),Lt=["innerHTML"],xt={key:1},Bt=r(()=>t("div",{class:"label"},"주요활동",-1)),St=["innerHTML"],Ct={key:2},Mt=r(()=>t("div",{class:"label"},"유의점",-1)),wt=["innerHTML"],Pt={key:3},Dt=r(()=>t("div",{class:"label"},"출처",-1)),Ht={class:"value"},qt={class:"sub-body"},Nt={class:"ul-box"},At={class:"input-ul"},Et={key:0},jt={class:"label"},Rt=["innerHTML"],Vt={key:1},Qt={class:"label"},Ut=r(()=>t("input",{type:"text",readonly:"",placeholder:"내용을 입력해주세요"},null,-1)),Ot={class:"sub-li"},zt={class:"label"},Ft=r(()=>t("input",{type:"text",readonly:"",placeholder:"내용을 입력해주세요"},null,-1));function Gt(e,s,l,c,i,_){const y=p("font-awesome-icon"),S=p("v-btn"),C=p("SEARCH"),M=p("v-list"),w=p("v-menu");return n(),a("div",z,[t("div",F,[t("div",G,[g(" 교과 리스트 "),t("div",J,[(n(!0),a(f,null,m(i.titles,o=>(n(),a("span",{class:N(o.type)},[g(d(o.text)+" ",1),o.type!="bold"?(n(),x(y,{key:0,class:"arrow-icon",icon:"fa-solid fa-angle-right"})):u("",!0)],2))),256))])]),t("div",K,[t("div",W,[b(y,{onClick:s[0]||(s[0]=o=>_.close()),style:{"font-size":"20pt"},icon:"fa-solid fa-xmark"})])])]),t("div",X,[t("div",Y,[t("div",Z,[g("선택된 교과 수 "),t("span",null,d(i.ids.length),1)]),b(S,{type:"button",variant:"outlined",style:{background:"#fff"},class:"basket-button",onClick:_.setBasket},{default:v(()=>[$]),_:1},8,["onClick"])]),t("div",tt,[i.settingflag?(n(),x(C,{key:0,onDoSearch:_.doSearch},null,8,["onDoSearch"])):u("",!0),t("div",st,[t("ul",et,[(n(!0),a(f,null,m(i.problemList,o=>(n(),a("li",null,[t("div",ot,[A(t("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=h=>i.ids=h),value:o.id},null,8,it),[[E,i.ids]])]),t("div",lt,[t("div",nt,d(o.schoolInfo)+" - "+d(o.gtype),1),t("div",null,[b(w,{transition:"fab-transition"},{activator:v(({props:h})=>[t("div",j({class:"subject"},h),d(o.subject),17)]),default:v(()=>[b(M,null,{default:v(()=>[t("div",at,[t("div",ct,[b(y,{icon:"fa-solid fa-xmark"})]),t("ul",dt,[t("li",rt,[ht,t("div",ut,d(o.schoolType),1)]),t("li",null,[_t,t("div",pt,d(o.gtype),1)]),t("li",bt,[ft,t("div",mt,d(o.textbookName),1)]),t("li",null,[vt,t("div",yt,d(o.target),1)]),o.standard?(n(),a("li",gt,[kt,t("div",{class:"value",innerHTML:i.util.nl2brContent(o.standard)},null,8,Tt)])):u("",!0),t("li",null,[It,t("div",{class:"value",innerHTML:i.util.nl2brContent(o.subject)},null,8,Lt)]),o.mainAct?(n(),a("li",xt,[Bt,t("div",{class:"value",innerHTML:i.util.nl2brContent(o.mainAct)},null,8,St)])):u("",!0),o.note?(n(),a("li",Ct,[Mt,t("div",{class:"value",innerHTML:i.util.nl2brContent(o.note)},null,8,wt)])):u("",!0),o.origin?(n(),a("li",Pt,[Dt,t("div",Ht,d(o.origin),1)])):u("",!0)]),t("div",qt,[t("div",Nt,[(n(!0),a(f,null,m(o.questionList,(h,k)=>(n(),a("ul",At,[o.questionType=="wrong"?(n(),a("li",Et,[t("div",jt,d(h.query),1),t("div",{class:"value",innerHTML:h.gpt},null,8,Rt)])):(n(),a("li",Vt,[t("div",Qt,d(h),1),Ut])),o.addQuestions[k]?(n(!0),a(f,{key:2},m(o.addQuestions[k],(P,Jt)=>(n(),a("li",Ot,[t("div",zt,d(P),1),Ft]))),256)):u("",!0)]))),256))])])])]),_:2},1024)]),_:2},1024)])])]))),256))])])])])])}const is=D(O,[["render",Gt],["__scopeId","data-v-8b4c0346"]]);export{is as default};
