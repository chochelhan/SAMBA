import{U as N,_ as A,a as E,b as S,c as M}from"./img_price4-dae31a49.js";import{a as x}from"./apiService-77935b08.js";import{Y as R,X as F,Z as I}from"./urls-04ad3523.js";import{U as h}from"./util-75dcb7cf.js";import{u as w}from"./setting-932355f8.js";import{A as C}from"./auth-eef4144a.js";import{_ as L,r as f,o as n,c as a,a as e,e as d,w as v,i as O,n as P,d as r,t as y,h as u,k as m,N as p,J as D,F as B,b as H,j as Y,v as G,p as j,g as z}from"./index-e96a63ea.js";import"./axios-c24e582b.js";const W={watch:{agree(i){this.checkForm()},period(i){let s=0;i=="year"?(s=this.useTypes[this.useType].yearPrice,this.useType=="school"&&(isNaN(this.addNumber)||this.addNumber&&(s=s+this.addNumber*this.addPrice*12))):(this.month=1,s=this.useTypes[this.useType].monthPrice,this.useType=="school"&&(isNaN(this.addNumber)||this.addNumber&&(s=s+this.addNumber*this.addPrice))),this.resultPrice=h.numberFormat(s),this.totalPrice=s},month(i){let s=this.useTypes[this.useType].monthPrice*i;this.useType=="school"&&(isNaN(this.addNumber)||this.addNumber&&(s=s+this.addNumber*this.addPrice*i)),this.resultPrice=h.numberFormat(s),this.totalPrice=s}},data(){return{useTypes:{student:{},teacher:{},school:{}},role:"",monthPrice:0,useType:"",myUseType:{},util:h,period:"year",resultPrice:0,payMethod:"card",tax:"no",payDisabled:!0,agree:"",buttonActive:"",companyName:"",companyAddr1:"",companyUser:"",companyPcs:"",companyEmail:"",taxUseType:"indi",taxPcs:"",taxUser:"",taxEmail:"",setting:null,agreeShow:!1,agreeTitle:"개인정보 수집 및 이용",agreeHtml:"",form:null,totalPrice:0,paymentFrameShow:!1,paymentFrameSrc:"",mobileView:!1,mobileClass:"",memberInfo:{},useTypeName:"",bankInfo:"우리은행 1005-503-710749  (주)페르소나에이아이",monthList:[{title:"1개월",value:1},{title:"3개월",value:3},{title:"6개월",value:6},{title:"9개월",value:9}],month:1,danal:{},addNumber:"",addPrice:0,taxFileName:"",safariV13:!1}},created(){const i=C.getSession();if(!i||!(i!=null&&i.memberInfo)){this.$router.push("/");return}if(this.$isMobile()&&(this.mobileView=!0,this.mobileClass="mobile"),this.safariV13=h.checkSafari(),this.memberInfo=i.memberInfo,this.emitter.on("pgResult",this.pgResult),this.setting=w(),this.setting.serverResponse)this.setAgree();else{const s=setInterval(()=>{this.setting.serverResponse&&(this.setAgree(),clearInterval(s))},100)}this.getData(),this.emitter.on("paymentResult",this.paymentResult)},methods:{getData(){x.post(R,{},i=>{switch(this.useTypes=i.useTypes,this.role=i.memberInfo.role,this.role){case"ROLE_MEMBER":this.useType="student",this.useTypeName="학생요금제";break;case"ROLE_TEACHER":this.useType="teacher",this.useTypeName="선생님 요금제";break;case"ROLE_MANAGER":this.useType="school",this.useTypeName="학교 요금제",this.addPrice=this.useTypes[this.useType].addPrice;break}this.myUseType=N[this.useType],this.monthPrice=h.numberFormat(this.useTypes[this.useType].monthPrice),this.resultPrice=h.numberFormat(this.useTypes[this.useType].yearPrice),this.totalPrice=this.useTypes[this.useType].yearPrice})},checkNum(i){if(isNaN(i))return"추가인원은 숫자만 입력가능합니다";if(i&&i.length>1&&i.substring(0,1)==0)return"정확한 숫자를 입력하세요";let s=0;return this.period=="year"?s=this.useTypes[this.useType].yearPrice+i*this.addPrice*12:s=this.useTypes[this.useType].monthPrice*this.month+i*this.addPrice*this.month,this.resultPrice=h.numberFormat(s),this.totalPrice=s,!0},checkForm(){this.agree?(this.buttonActive="active",this.payDisabled=!1):(this.buttonActive="",this.payDisabled=!0)},imgUpload(){this.$refs.fileupload.click()},async uploadActive(i){const s=i.target.files[0];this.companyAddr1=s.name,this.updateUploadImg(s)},updateUploadImg(i){const s={image:i,type:"tax"};x.postFile(F,s,_=>{_.status=="success"&&(this.taxFileName=_.fileName)})},validate(){if(this.payMethod=="bank"&&this.tax!="no"&&!this.form)return;const i=this.mobileView?"WM":"WP",s={useType:this.useType,period:this.period,month:this.month.toString(),price:this.totalPrice.toString(),addNumber:this.addNumber?this.addNumber.toString():"",payMethod:this.payMethod,tax:this.tax,companyName:this.companyName,companyAddr2:this.taxFileName,companyAddr1:this.companyAddr1,companyCeo:"",companyType:"",companyPart:"",companyPost:"",companyUser:this.companyUser,companyPcs:this.companyPcs,companyEmail:this.companyEmail,taxUseType:this.taxUseType,taxPcs:this.taxPcs,taxUser:this.taxUser,taxEmail:this.taxEmail,device:i};this.emitter.emit("overlay","open"),x.post(I,s,_=>{let b={};this.emitter.emit("overlay","hide"),_.status=="success"?this.payMethod=="card"?this.setPaymentFrame(_.danalInfo):(b={message:"주문신청이 완료되었습니다",doAction:()=>{this.$router.push("/mypage/paymentInfo")}},this.emitter.emit("modalOpen",b)):(b={message:"잘못된 접근입니다"},this.emitter.emit("modalOpen",b))})},setPaymentFrame(i){i.RETURNCODE=="0000"?(this.paymentFrameShow=!0,this.danal=i,setTimeout(()=>{document.danalForm.submit()},100)):this.emitter.emit("modalOpen",{message:"PG 설정 정보가 잘못되었습니다<br>시스템 관리자에게 문의하세요"})},pgResult(i){this.paymentFrameShow=!1;let s={};i.data=="succ"?s={message:"주문신청이 완료되었습니다",doAction:()=>{location.href="/mypage/paymentInfo"}}:i.data=="fail"?s={message:"주문 취소 하였습니다"}:s={message:"잘못된 접근입니다"},this.emitter.emit("modalOpen",s)},setAgree(){this.setting.agree&&this.setting.agree.collect&&(this.agreeHtml=this.setting.agree.collect.content)}},beforeUnmount(){this.emitter.off("pgResult")}},o=i=>(j("data-v-ab98b7be"),i=i(),z(),i),J={class:"edu-container"},X=o(()=>e("div",{class:"page-header"},[e("div",{class:"page-title"},"요금제")],-1)),Z={class:"page-body"},q=o(()=>e("div",{class:"sub-title"},"내가 선택한 요금제",-1)),K={class:"my-info"},Q={class:"left"},$={class:"img"},ee={key:0,src:A},se={key:1,src:E},te={key:2,src:S},le={key:3,src:M},ie={class:"info"},oe={class:"gray-text"},ne={class:"bold-text"},ae={class:"right"},ue=o(()=>e("div",{class:"sub-title"},"결제 선택",-1)),de={class:"guide-info"},re={class:"guide-ul"},me=o(()=>e("li",{class:"label"},"결제 방식",-1)),ce={key:0,class:"guide-ul"},pe=o(()=>e("li",{class:"label",style:{"min-height":"80px"}},"추가 인원",-1)),he={style:{"min-height":"80px","padding-top":"10px"}},ye={key:1,class:"guide-ul"},_e=o(()=>e("li",{class:"label"},"개월수 선택",-1)),be={style:{"padding-top":"10px"}},ge=["value"],fe={class:"guide-ul"},ve=o(()=>e("li",{class:"label"},"결제 금액",-1)),Te={class:"price"},xe={class:"guide-ul"},Pe=o(()=>e("li",{class:"label"},"결제 수단",-1)),Ue={key:2,class:"guide-ul"},Ve=o(()=>e("li",{class:"label kt"},"입금계좌 정보",-1)),ke={class:"lt"},Ne={key:3,class:"guide-ul"},Ae=o(()=>e("li",{class:"label kt"},"세금계산서(현금영수증) 발행여부",-1)),Ee={class:"lt"},Se={class:"guide-ul"},Me=o(()=>e("li",{class:"label sub-li"},"안내",-1)),Re={class:"sub-li"},Fe={class:"gde-ul"},Ie={key:0},we={key:1},Ce={key:2},Le={key:3},Oe=o(()=>e("li",null,"- 무통장입금 선택 시 3일 내 입금이 확인되지 않으면 자동 취소됩니다.",-1)),De=o(()=>e("li",null,"- 무통장입금 시 예금주 명은 ‘㈜페르소나에이아이’입니다.",-1)),Be=o(()=>e("li",null,"- 무통장입금 시 회원명과 금액이 일치해야 입금이 정상 처리됩니다. 회원 명과 입금자명이 다를 경우에는 입금 후 고객센터(02-762-8713)로 연락 주시기 바랍니다.",-1)),He=o(()=>e("li",null,"- 유료 결제 시, 원활한 서비스 제공을 위해 증빙자료를 요청드릴 수 있습니다.",-1)),Ye=o(()=>e("li",null,"- 결제(입금) 확인 및 취소 문의는 고객센터로 연락 주시기 바랍니다.",-1)),Ge={key:4},je={key:0,class:"tax-info"},ze=o(()=>e("div",{class:"sub-title"},"세금계산서 발행정보",-1)),We={class:"guide-info"},Je={class:"guide-ul"},Xe=o(()=>e("li",{class:"label"},"단체명",-1)),Ze={class:"guide-ul"},qe=o(()=>e("li",{class:"label"},"파일첨부",-1)),Ke={style:{display:"flex","padding-bottom":"5px"}},Qe={class:"guide-ul"},$e=o(()=>e("li",{class:"label"},"담당자",-1)),es={class:"guide-ul"},ss=o(()=>e("li",{class:"label"},"연락처",-1)),ts={class:"guide-ul"},ls=o(()=>e("li",{class:"label kt"},[u("발급받을"),e("br"),u(" E-mail")],-1)),is={key:1,class:"tax-info"},os=o(()=>e("div",{class:"sub-title"},"현금영수증 발행정보",-1)),ns={class:"guide-info"},as={class:"guide-ul"},us=o(()=>e("li",{class:"label",style:{"padding-top":"10px"}},"용도",-1)),ds={class:"lt"},rs=o(()=>e("br",null,null,-1)),ms={class:"guide-ul"},cs=o(()=>e("li",{class:"label kt"},[u("휴대폰"),e("br"),u(" 번호")],-1)),ps={class:"guide-ul"},hs=o(()=>e("li",{class:"label"},"구매자명",-1)),ys={class:"guide-ul"},_s=o(()=>e("li",{class:"label"},"이메일",-1)),bs={class:"msg"},gs={class:"button-box"},fs=o(()=>e("span",null,"결제하기",-1)),vs={class:"modal-layout",style:{background:"#fff"}},Ts={class:"modal-header"},xs={class:"modal-title"},Ps={class:"modal-body"},Us=["innerHTML"],Vs={class:"button-center"},ks=o(()=>e("span",null,"확인",-1)),Ns=o(()=>e("div",{id:"bannerPaymentFrameBox"},[e("iframe",{id:"bannerPaymentFrame",name:"bannerPaymentFrame",frameborder:"0",scrolling:"0"})],-1)),As=[Ns],Es=["action"],Ss=["value"];function Ms(i,s,_,b,t,g){const c=f("v-text-field"),U=f("v-select"),T=f("v-btn"),V=f("v-form"),k=f("v-dialog");return n(),a("div",J,[X,e("div",Z,[d(V,{modelValue:t.form,"onUpdate:modelValue":s[23]||(s[23]=l=>t.form=l),novalidate:"",onSubmit:O(g.validate,["prevent"])},{default:v(()=>[q,e("div",K,[e("div",Q,[e("div",$,[t.useType=="free"?(n(),a("img",ee)):t.useType=="student"?(n(),a("img",se)):t.useType=="teacher"?(n(),a("img",te)):t.useType=="school"?(n(),a("img",le)):r("",!0)]),e("div",ie,[e("div",oe,y(t.myUseType.text),1),e("div",ne,y(t.myUseType.title),1)])]),e("div",ae,[e("span",null,y(t.monthPrice),1),u(" 원/월 ")])]),ue,e("div",de,[e("ul",re,[me,e("li",null,[e("label",null,[m(e("input",{type:"radio",value:"month","onUpdate:modelValue":s[0]||(s[0]=l=>t.period=l)},null,512),[[p,t.period]]),u(" 월간 결제 ")]),e("label",null,[m(e("input",{type:"radio",value:"year","onUpdate:modelValue":s[1]||(s[1]=l=>t.period=l)},null,512),[[p,t.period]]),u(" 연간 결제 ")])])]),t.useType=="school"?(n(),a("ul",ce,[pe,e("li",he,[d(c,{placeholder:"추가 인원을 입력하세요",variant:"outlined",density:"compact",rules:[g.checkNum],style:{"max-width":"300px"},modelValue:t.addNumber,"onUpdate:modelValue":s[2]||(s[2]=l=>t.addNumber=l)},null,8,["rules","modelValue"])])])):r("",!0),t.period=="month"?(n(),a("ul",ye,[_e,e("li",be,[t.safariV13?m((n(),a("select",{key:0,"onUpdate:modelValue":s[3]||(s[3]=l=>t.month=l),style:{position:"relative",top:"-10px"}},[(n(!0),a(B,null,H(t.monthList,l=>(n(),a("option",{value:l.value},y(l.title),9,ge))),256))],512)),[[D,t.month]]):(n(),Y(U,{key:1,style:{"max-width":"300px",width:"100%"},modelValue:t.month,"onUpdate:modelValue":s[4]||(s[4]=l=>t.month=l),variant:"outlined",density:"compact",items:t.monthList},null,8,["modelValue","items"]))])])):r("",!0),e("ul",fe,[ve,e("li",null,[e("span",Te,y(t.resultPrice),1),u("원 ")])]),e("ul",xe,[Pe,e("li",null,[e("label",null,[m(e("input",{type:"radio",value:"card","onUpdate:modelValue":s[5]||(s[5]=l=>t.payMethod=l)},null,512),[[p,t.payMethod]]),u(" 카드결제 ")]),e("label",null,[m(e("input",{type:"radio",value:"bank","onUpdate:modelValue":s[6]||(s[6]=l=>t.payMethod=l)},null,512),[[p,t.payMethod]]),u(" 무통장입금 ")])])]),t.payMethod=="bank"?(n(),a("ul",Ue,[Ve,e("li",ke,y(t.bankInfo),1)])):r("",!0),t.payMethod=="bank"?(n(),a("ul",Ne,[Ae,e("li",Ee,[e("label",null,[m(e("input",{type:"radio",value:"no","onUpdate:modelValue":s[7]||(s[7]=l=>t.tax=l)},null,512),[[p,t.tax]]),u(" 미발행 ")]),e("label",null,[m(e("input",{type:"radio",value:"yes","onUpdate:modelValue":s[8]||(s[8]=l=>t.tax=l)},null,512),[[p,t.tax]]),u(" 세금계산서 발행 ")]),e("label",null,[m(e("input",{type:"radio",value:"cash","onUpdate:modelValue":s[9]||(s[9]=l=>t.tax=l)},null,512),[[p,t.tax]]),u(" 현금영수증 발행 ")])])])):r("",!0),e("ul",Se,[Me,e("li",Re,[e("ul",Fe,[t.useType=="school"?(n(),a("li",Ie,"- 학교 요금제는 기본 제공 인원 수 외 인원 추가가 가능 합니다.")):r("",!0),t.useType=="school"?(n(),a("li",we,"- 추가 되는 인원수에 대한 비용은 (기본료+인원 추가금)이 합산 된 금액으로 결제 됩니다.")):r("",!0),t.useType=="school"?(n(),a("li",Ce,"- 기본 제공되는 인원 수로 서비스 이용이 충분한 경우 인원수 추가는 하지 않으셔도 됩니다.")):r("",!0),t.useType=="school"?(n(),a("li",Le,"- 서비스 이용 중 인원수에 대한 수정은 불가 합니다.")):r("",!0),Oe,De,Be,He,Ye,t.payMethod=="bank"?(n(),a("li",Ge,"- 세금계산서, 현금영수증을 요청하신 경우에는 무통장 입금이 확인 된 후, 영업일 기준 7일 이내 발급 됩니다.")):r("",!0)])])])]),t.payMethod=="bank"&&t.tax=="yes"?(n(),a("div",je,[ze,e("div",We,[e("ul",Je,[Xe,e("li",null,[d(c,{rules:[l=>!!l||"단체명을 입력하세요"],placeholder:"단체명을 입력하세요",variant:"outlined",density:"compact",modelValue:t.companyName,"onUpdate:modelValue":s[10]||(s[10]=l=>t.companyName=l)},null,8,["rules","modelValue"])])]),e("ul",Ze,[qe,e("li",Ke,[d(c,{readonly:!0,rules:[l=>!!l||"고유번호증 또는 사업자등록증을 첨부해주세요"],placeholder:"고유번호증 또는 사업자등록증을 첨부해주세요",variant:"outlined",density:"compact",modelValue:t.companyAddr1,"onUpdate:modelValue":s[11]||(s[11]=l=>t.companyAddr1=l)},null,8,["rules","modelValue"]),d(T,{variant:"outlined",onClick:g.imgUpload,style:{height:"40px"}},{default:v(()=>[u("파일첨부")]),_:1},8,["onClick"]),e("input",{style:{display:"none"},type:"file",accept:"image/png, image/jpeg, image/gif",onChange:s[12]||(s[12]=(...l)=>g.uploadActive&&g.uploadActive(...l)),ref:"fileupload"},null,544)])]),e("ul",Qe,[$e,e("li",null,[d(c,{rules:[l=>!!l||"담당자를 입력하세요"],placeholder:"담당자를 입력하세요",variant:"outlined",density:"compact",modelValue:t.companyUser,"onUpdate:modelValue":s[13]||(s[13]=l=>t.companyUser=l)},null,8,["rules","modelValue"])])]),e("ul",es,[ss,e("li",null,[d(c,{rules:[l=>!!l||"연락처를 입력하세요"],placeholder:"연락처를 입력하세요",variant:"outlined",density:"compact",modelValue:t.companyPcs,"onUpdate:modelValue":s[14]||(s[14]=l=>t.companyPcs=l)},null,8,["rules","modelValue"])])]),e("ul",ts,[ls,e("li",null,[d(c,{rules:[l=>!!l||"발급받을 E-mail을 입력하세요"],placeholder:"발급받을 E-mail을 입력하세요",variant:"outlined",density:"compact",modelValue:t.companyEmail,"onUpdate:modelValue":s[15]||(s[15]=l=>t.companyEmail=l)},null,8,["rules","modelValue"])])])])])):r("",!0),t.payMethod=="bank"&&t.tax=="cash"?(n(),a("div",is,[os,e("div",ns,[e("ul",as,[us,e("li",ds,[e("label",null,[m(e("input",{type:"radio",style:{position:"relative",top:"2px"},value:"indi","onUpdate:modelValue":s[16]||(s[16]=l=>t.taxUseType=l)},null,512),[[p,t.taxUseType]]),u(" 개인 소득공제용 ")]),rs,e("label",null,[m(e("input",{type:"radio",style:{position:"relative",top:"2px"},value:"doc","onUpdate:modelValue":s[17]||(s[17]=l=>t.taxUseType=l)},null,512),[[p,t.taxUseType]]),u(" 지출 증빙용 ")])])]),e("ul",ms,[cs,e("li",null,[d(c,{rules:[l=>!!l||"휴대폰 번호를 입력하세요"],placeholder:"휴대폰 번호를 입력하세요",variant:"outlined",density:"compact",modelValue:t.taxPcs,"onUpdate:modelValue":s[18]||(s[18]=l=>t.taxPcs=l)},null,8,["rules","modelValue"])])]),e("ul",ps,[hs,e("li",null,[d(c,{rules:[l=>!!l||"구매자명을 입력하세요"],placeholder:"구매자명을 입력하세요",variant:"outlined",density:"compact",modelValue:t.taxUser,"onUpdate:modelValue":s[19]||(s[19]=l=>t.taxUser=l)},null,8,["rules","modelValue"])])]),e("ul",ys,[_s,e("li",null,[d(c,{rules:[l=>!!l||"이메일을 입력하세요"],placeholder:"이메일을 입력하세요",variant:"outlined",density:"compact",modelValue:t.taxEmail,"onUpdate:modelValue":s[20]||(s[20]=l=>t.taxEmail=l)},null,8,["rules","modelValue"])])])])])):r("",!0),e("div",bs,[e("label",null,[m(e("input",{type:"checkbox",value:"yes","onUpdate:modelValue":s[21]||(s[21]=l=>t.agree=l)},null,512),[[G,t.agree]]),e("span",{onClick:s[22]||(s[22]=l=>t.agreeShow=!0)},"개인정보 수집 및 이용"),u(", 요금 및 결제 정보에 동의합니다 ")])]),e("div",gs,[d(T,{class:P("pay-button "+t.buttonActive),disabled:t.payDisabled,variant:"tonal",type:"submit"},{default:v(()=>[fs]),_:1},8,["class","disabled"])])]),_:1},8,["modelValue","onSubmit"])]),d(k,{modelValue:t.agreeShow,"onUpdate:modelValue":s[25]||(s[25]=l=>t.agreeShow=l),width:"800",persistent:"",style:{"z-index":"100"}},{default:v(()=>[e("div",vs,[e("div",Ts,[e("div",xs,y(t.agreeTitle),1)]),e("div",Ps,[e("div",{class:"agree-html",innerHTML:t.agreeHtml},null,8,Us)]),e("div",Vs,[d(T,{class:"agree-button",type:"button",variant:"tonal",onClick:s[24]||(s[24]=l=>t.agreeShow=!1)},{default:v(()=>[ks]),_:1})])])]),_:1},8,["modelValue"]),t.paymentFrameShow?(n(),a("div",{key:0,id:"screenLayout",class:P(t.mobileClass)},As,2)):r("",!0),e("form",{name:"danalForm",action:t.danal.STARTURL,target:"bannerPaymentFrame",method:"POST"},[e("input",{type:"hidden",name:"STARTPARAMS",value:t.danal.STARTPARAMS},null,8,Ss)],8,Es)])}const Bs=L(W,[["render",Ms],["__scopeId","data-v-ab98b7be"]]);export{Bs as default};
