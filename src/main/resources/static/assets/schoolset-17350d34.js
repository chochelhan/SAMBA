import{a as g,k as V,l as L,m as D,n as C}from"./urls-dc95fcef.js";import{U as k}from"./util-75dcb7cf.js";import{s as I}from"./shopTable-af3b6876.js";import{_ as M,r as d,o as f,c as A,a as e,i as _,e as a,w as m,h as v,t as b,j as N,d as T,p as P,g as E}from"./index-e96a63ea.js";import"./axios-c24e582b.js";import"./apiService-77935b08.js";import"./urls-04ad3523.js";import"./auth-eef4144a.js";import"./jquery-d8551b6e.js";const O={components:{shopTable:I},watch:{datalimit(l){this.getDataList(1)}},data(){return{util:k,ids:[],fixed:0,memberList:[],paging:{total:"",links:[],currentPage:1,lastPage:1},page:1,datalimit:20,dataSort:{field:"id",sort:"desc"},keyword:"",datalimitList:[{title:"10개",value:10},{title:"20개",value:20},{title:"30개",value:30},{title:"50개",value:50},{title:"100개",value:100}],columns:[{name:"선택",id:"id",sort:!1,width:70,type:"allCheckbox"},{name:"번호",id:"number",sort:!1,width:60},{name:"학교급",id:"classification",width:120,sort:!0},{name:"시/도",id:"city",width:100},{name:"구/군",id:"area",width:100},{name:"학교명",id:"name",width:300,sort:!0,type:"underline-action",action:"memberView"}],selectedId:"",tableShow:!0,selectedMember:{},showDialog:!1,city:"",area:"",classification:"",classificationList:[{title:"학교급을 선택하세요",value:""},{title:"초등학교",value:"초등학교"},{title:"중학교",value:"중학교"},{title:"고등학교",value:"고등학교"}],cityList:[{title:"시/도를 선택하세요",value:""},{title:"서울",value:"서울"},{title:"광주",value:"광주"},{title:"부산",value:"부산"},{title:"인천",value:"인천"},{title:"대구",value:"대구"},{title:"대전",value:"대전"},{title:"울산",value:"울산"},{title:"세종",value:"세종"},{title:"경기",value:"경기"},{title:"강원",value:"강원"},{title:"제주",value:"제주"},{title:"전남",value:"전남"},{title:"전북",value:"전북"},{title:"충남",value:"충남"},{title:"충북",value:"충북"},{title:"경남",value:"경남"},{title:"경북",value:"경북"}],regCity:"",regArea:"",regClassification:"",regName:"",dialogTitle:"등록",regMode:"insert"}},created(){this.setInit()},methods:{setInit(){this.searchReset(),this.getDataList(1)},searchReset(){this.keyword="",this.dataSort.field="id",this.dataSort.sort="desc",this.datalimit=20,this.page=1,this.city="",this.area="",this.classification="",this.selectedId="",this.selectedMember={},this.showDialog=!1},getSearchParams(l){return this.page=l,{orderByField:this.dataSort.field,orderBySort:this.dataSort.sort,limit:this.datalimit.toString(),page:l.toString(),keyword:this.keyword,city:this.city,area:this.area,classification:this.classification}},getDataList(l){const t=this.getSearchParams(l);g.post(V,t,o=>{this.setDataList(o.data)})},setDataList(l){this.memberList=[],this.paging={total:l.totalElements,currentPage:this.page,pageGroup:10,limit:this.datalimit};const t=parseInt(l.totalElements)-this.datalimit*(parseInt(this.page)-1);let o=0;for(let r of l.content)r.number=t-o,this.memberList.push(r),o++;this.tableShow=!0},pageMove(l){this.getDataList(l.page)},tableEventAction(l){switch(l.type){case"dataSort":this.dataSort=l.sort,this.getDataList(1);break}},memberView(l){const o=this.memberList.filter(r=>r.id==l.id)[0];this.selectedId=l.id,this.regCity=o.city,this.regArea=o.area,this.regClassification=o.classification,this.regName=o.name,this.dialogTitle="수정",this.regMode="update",this.showDialog=!0},search(){this.getDataList(1)},reload(){this.showDialog=!1,this.getDataList(this.page)},checkDataList(l){this.ids=[];for(let t in l)this.ids.push(t)},deleteMember(){if(this.ids.length<1){let t={message:"삭제할 학교를 1개 이상 선택하세요"};this.emitter.emit("modalOpen",t);return}let l={type:"confirm",message:"선택된 학교를 삭제하시겠습니까?",doAction:()=>{this.emitter.emit("overlay","open"),g.post(L,{list:this.ids},t=>{if(this.emitter.emit("overlay","hide"),t.status=="success"){let o={message:"정보가 삭제되었습니다"};this.emitter.emit("modalOpen",o),this.tableShow=!1,setTimeout(()=>{this.tableShow=!0,this.setInit()},100)}})}};this.emitter.emit("modalOpen",l)},insertSchool(){this.regCity="",this.regArea="",this.regClassification="",this.regName="",this.dialogTitle="등록",this.regMode="insert",this.showDialog=!0},async validate(){const{valid:l}=await this.$refs.form.validate();if(!l)return;let t={},o=D;this.regMode=="insert"?t={city:this.regCity,area:this.regArea,classification:this.regClassification,name:this.regName}:(o=C,t={id:this.selectedId.toString(),city:this.regCity,area:this.regArea,classification:this.regClassification,name:this.regName}),this.emitter.emit("overlay","open"),g.post(o,t,r=>{this.emitter.emit("overlay","hide");let i=r.status,n={};i=="success"?(this.showDialog=!1,this.tableShow=!1,this.regMode=="insert"?(setTimeout(()=>{this.tableShow=!0,this.setInit()},100),n={message:"정보를 등록하였습니다"}):(setTimeout(()=>{this.tableShow=!0,this.getDataList(this.page)},100),n={message:"정보를 변경하였습니다"})):n={message:"잘못된 접근입니다"},this.emitter.emit("modalOpen",n)})}},updated(){}},c=l=>(P("data-v-6406020e"),l=l(),E(),l),U={class:"coupon-list"},B={class:"table-box"},H={class:"search-box"},R=c(()=>e("div",{class:"sub-title",style:{"padding-left":"10px"}},"회원 검색",-1)),j={class:"table-search",cellspacing:"0",cellpadding:"0",border:"0"},z=c(()=>e("th",{style:{"border-radius":"5px"}},"학교급",-1)),F={style:{"border-bottom":"solid 1px #999",height:"50px"}},G=c(()=>e("th",{style:{"border-left":"solid 1px #999","border-bottom":"solid 1px #999"}},"시/도",-1)),q={style:{"border-bottom":"solid 1px #999"}},J=c(()=>e("th",null,"학교명",-1)),K={colspan:"3"},Q={style:{display:"flex","padding-top":"6px"}},W={style:{"margin-left":"20px",width:"300px"}},X={class:"button-row"},Y=c(()=>e("span",null,"초기화",-1)),Z=c(()=>e("span",null,"검색",-1)),$={style:{display:"flex",padding:"0 10px","justify-content":"space-between","z-index":"20"}},tt={class:"sub-title",style:{display:"flex"}},et={class:"select-box",style:{display:"flex","max-height":"40px","padding-top":"4px"}},it={class:"total"},st={class:"modal-layout",style:{background:"#fff"}},lt={class:"modal-header"},at={class:"modal-title"},ot={class:"modal-body",style:{padding:"30px 50px"}},nt={class:"input-text-box"},rt={class:"input-text-box"},dt={class:"input-text-box"},mt={class:"input-text-box"},ct={class:"input-text-box",style:{"text-align":"center","padding-top":"30px"}},ut=c(()=>e("span",null,"저장",-1));function ht(l,t,o,r,i,n){const u=d("v-select"),p=d("v-text-field"),h=d("v-btn"),y=d("shopTable"),x=d("font-awesome-icon"),w=d("v-form"),S=d("v-dialog");return f(),A("div",U,[e("div",B,[e("form",{novalidate:"",onSubmit:t[4]||(t[4]=_((...s)=>n.search&&n.search(...s),["prevent"]))},[e("div",H,[R,e("table",j,[e("tbody",null,[e("tr",null,[z,e("td",F,[a(u,{modelValue:i.classification,"onUpdate:modelValue":t[0]||(t[0]=s=>i.classification=s),items:i.classificationList,variant:"outlined",style:{"margin-top":"10px"},density:"compact"},null,8,["modelValue","items"])]),G,e("td",q,[a(u,{modelValue:i.city,"onUpdate:modelValue":t[1]||(t[1]=s=>i.city=s),items:i.cityList,variant:"outlined",style:{"margin-top":"10px"},density:"compact"},null,8,["modelValue","items"])])]),e("tr",null,[J,e("td",K,[e("div",Q,[e("div",W,[a(p,{variant:"outlined",density:"compact",modelValue:i.keyword,"onUpdate:modelValue":t[2]||(t[2]=s=>i.keyword=s)},null,8,["modelValue"])])])])])])])]),e("div",X,[a(h,{class:"white-button",variant:"outlined",onClick:t[3]||(t[3]=s=>n.searchReset())},{default:m(()=>[Y]),_:1}),a(h,{class:"search-button",type:"submit",variant:"tonal"},{default:m(()=>[Z]),_:1})])],32),e("div",$,[e("div",tt,[v("학교 리스트 "),a(h,{color:"primary",class:"sdel-button",style:{"margin-top":"-5px"},rounded:"",onClick:t[5]||(t[5]=s=>n.deleteMember())},{default:m(()=>[v(" 선택삭제 ")]),_:1}),a(h,{class:"sdel-button",style:{"margin-top":"-5px","margin-left":"50px"},color:"blue",rounded:"",onClick:t[6]||(t[6]=s=>n.insertSchool())},{default:m(()=>[v(" 학교 등록 ")]),_:1})]),e("div",et,[e("div",it,"전체 학교수 "+b(i.util.numberFormat(i.paging.total))+"명",1),a(u,{modelValue:i.datalimit,"onUpdate:modelValue":t[7]||(t[7]=s=>i.datalimit=s),variant:"underlined",density:"compact",items:i.datalimitList},null,8,["modelValue","items"])])]),i.tableShow?(f(),N(y,{key:0,datas:i.memberList,fixed:i.fixed,onPageMove:n.pageMove,onParentEvent:n.tableEventAction,columns:i.columns,paging:i.paging,onCheckDataList:n.checkDataList,onMemberView:n.memberView},null,8,["datas","fixed","onPageMove","onParentEvent","columns","paging","onCheckDataList","onMemberView"])):T("",!0)]),a(S,{modelValue:i.showDialog,"onUpdate:modelValue":t[13]||(t[13]=s=>i.showDialog=s),width:"600",persistent:"",rounded:"",style:{"z-index":"100"}},{default:m(()=>[e("div",st,[e("div",lt,[e("div",at,"학교 "+b(i.dialogTitle),1),e("div",{class:"modal-close",onClick:t[8]||(t[8]=s=>i.showDialog=!1)},[a(x,{icon:"fa-solid fa-circle-xmark"})])]),e("div",ot,[a(w,{onSubmit:_(n.validate,["prevent"]),ref:"form"},{default:m(()=>[e("div",null,[e("div",nt,[a(u,{modelValue:i.regClassification,"onUpdate:modelValue":t[9]||(t[9]=s=>i.regClassification=s),items:i.classificationList,variant:"outlined",label:"학교급",rules:[s=>!!s||"학교급을 선택하세요"],density:"compact"},null,8,["modelValue","items","rules"])]),e("div",rt,[a(u,{modelValue:i.regCity,"onUpdate:modelValue":t[10]||(t[10]=s=>i.regCity=s),items:i.cityList,variant:"outlined",rules:[s=>!!s||"시/도를 입력하세요"],density:"compact"},null,8,["modelValue","items","rules"])]),e("div",dt,[a(p,{modelValue:i.regArea,"onUpdate:modelValue":t[11]||(t[11]=s=>i.regArea=s),label:"구/군",variant:"outlined",rules:[s=>!!s||"구/군을 입력하세요"],density:"compact"},null,8,["modelValue","rules"])]),e("div",mt,[a(p,{modelValue:i.regName,"onUpdate:modelValue":t[12]||(t[12]=s=>i.regName=s),label:"학교명",variant:"outlined",rules:[s=>!!s||"학교명을 입력하세요"],density:"compact"},null,8,["modelValue","rules"])]),e("div",ct,[a(h,{class:"black-button",style:{background:"#000",color:"#fff",height:"55px",width:"150px"},type:"submit",variant:"tonal"},{default:m(()=>[ut]),_:1})])])]),_:1},8,["onSubmit"])])])]),_:1},8,["modelValue"])])}const St=M(O,[["render",ht],["__scopeId","data-v-6406020e"]]);export{St as default};
