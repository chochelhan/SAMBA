import{a as m}from"./apiService-77935b08.js";import{v as y}from"./urls-04ad3523.js";const D={payEndDate:!1,totalQuestion:{},payNoticeRemainDay:7,questionType:"normal",imageType:"",gptUserQuestions:[{role:"system",content:"You are a helpful assistant."}],nl2br(e){return e.value.replace(/(\n|\r\n)/g,"<br>")},nl2brContent(e){return e?(e=e.toString(),e=e.replace(/(\n|\r\n)/g,"<br>"),e):""},stripTags(e){let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},email(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},numericByPrice(e){if(e==0)return!1;if(e){e=e.toString();let t=e.replace(/,/gi,"");return t=t.toString().replace(/-/gi,""),isNaN(t)}else return!0},numeric(e){return isNaN(e)},br2nl(e){return e.replace(/(<br>|<br\/>|<br \/>)/g,"\r")},numberFormat(e){return e?(isNaN(e)&&(e=e.toString().replace(/-/gi,"")),new Intl.NumberFormat(["en-US"],{}).format(e)):0},getStrCut(e,t){return e.length>=t?e.substr(0,t)+"..":e},getTimeFormat(e){const t=new Date(parseFloat(e));let s=t.getMonth()+1;s<10&&(s="0"+s);let n=t.getDate();return n<10&&(n="0"+n),t.getFullYear()+"-"+s+"-"+n},checkPaymentUseDialog(e){const s=new Date(e.payEndDate+"T00:00:00+09:00").getTime(),o=new Date(this.getStandardNowDate()).getTime();let a=s-o;const r=parseInt(a/(24*36e5)),i=e.payStartDate+" ~ "+e.payEndDate;return r<0?{code:"expire",msg:"요금제 이용기간이 만료 되었습니다<br>(이용기간 : "+i+")"}:r+1-this.payNoticeRemainDay<1?{code:"remain",msg:"요금제 이용기간이 만료될 예정입니다<br>(이용기간 : "+i+")"}:{code:"none"}},checkPaymentInit(e,t,s){this.payEndDate=!1,m.post(y,{},n=>{if(n.status=="success"&&(this.payEndDate=!0),!this.payEndDate&&t=="go"){const o={message:"사용기간이 만료되었습니다",doAction:()=>{s.$router.push("/mypage/paymentGuide")}};s.emitter.emit("modalOpen",o)}})},checkPaymentEndDate(e){e=="succ"?this.payEndDate=!0:this.payEndDate=!1},checkPaymentAccept(e,t){this.checkPaymentInit(e,"go",t)},checkPayment(e){if(!this.payEndDate){const t={message:"사용기간이 만료되었습니다",doAction:()=>{e.$router.push("/mypage/paymentGuide")}};e.emitter.emit("modalOpen",t)}return this.payEndDate},getCheckDay(){const e=new Date(this.getStandardNowDate());e.setDate(e.getDate()+3);let t=e.getMonth()+1;t=t<10?"0"+t:t;let s=e.getDate()<10?"0"+e.getDate():e.getDate();return e.getFullYear().toString()+t.toString()+s.toString()},setGptQuestionInit(){this.gptUserQuestions=[{role:"system",content:"You are a helpful assistant."}]},getGptQuestion(e){this.setGptQuestionInit();let t="";if(this.totalQuestion.totalQuestion){t=this.totalQuestion.totalQuestion;let s=1;for(const n of e)n.userAnswer&&(t=t.replace("[:c"+s+":]",n.userAnswer)),s++}else t=e[0].userAnswer;return this.gptUserQuestions.push({role:"user",content:t}),this.gptUserQuestions},getGptUnitStepQuestion(e,t){this.setGptQuestionInit();let s=e[t].userAnswer;switch(this.questionType){case"step":case"unit":this.totalQuestion.totalQuestionList[t]&&(s=this.totalQuestion.totalQuestionList[t].replace("[:c"+(t+1)+":]",e[t].userAnswer));break;case"image":if(this.imageType=="all"&&this.totalQuestion.totalQuestionList[t]&&(s=this.totalQuestion.totalQuestionList[t].replace("[:c"+(t+1)+":]",e[t].userAnswer),t>0)){let o=1;for(let a of this.totalQuestion.totalQuestionList)o<t+1&&a.orgAiMessage&&(s=s.replace("[:a"+o+":]","["+a.orgAiMessage+"]")),o++}break}return this.gptUserQuestions.push({role:"user",content:s}),this.gptUserQuestions},getGptUnitSubQuestion(e,t,s){this.setGptQuestionInit();const n=e[t].subQuestions[s];let o=n.userAnswer;this.totalQuestion.totalAddQuestionList[t]&&this.totalQuestion.totalAddQuestionList[t][s]&&(o=this.totalQuestion.totalAddQuestionList[t][s].replace("[:c"+(t+1)+"-"+(s+1)+":]",n.userAnswer));const a=e[t].orgAiMessage;o=o.replace("[:a"+(t+1)+":]","["+a+"]");let r=0;for(const i of e[t].subQuestions)i.orgAiMessage&&s>r&&(o=o.replace("[:a"+(t+1)+"-"+(r+1)+":]","["+i.orgAiMessage+"]")),r++;return this.gptUserQuestions.push({role:"user",content:o}),this.gptUserQuestions},updateGptStepQuestion(e,t){let s=0,n="";for(const o of e){if(s<=t&&o.userAnswer){let a=o.userAnswer;this.totalQuestion.totalQuestionList[s]&&(n=this.totalQuestion.totalQuestionList[s],a=n.replace("[:c"+(s+1)+":]",o.userAnswer)),this.gptUserQuestions.push({role:"user",content:a})}s++}},checkGptAnswer(e){let t=!0;for(const s of e)if(this.questionType=="normal"){if(!e[0].aiAnswer||!s.userAnswer){t=!1;break}}else{if(console.log(s),!s.aiAnswer||!s.userAnswer){t=!1;break}for(const n of s.subQuestions)if(!n.aiAnswer||!n.userAnswer){t=!1;break}}return t},getProblemData(e){const t=JSON.parse(e.questions),s=[];let n=[],o=[],a="normal",r="",i="",u="";t.questions?(a=t.questionType,n=t.questions,a=="unit"||a=="wrong"?o=t.addQuestions:a=="image"?r=t.imageType:a=="graph"&&(i=t.graphType,u=t.gdType)):n=t;try{this.totalQuestion=JSON.parse(e.totalQuestion)}catch{this.totalQuestion={totalQuestion:e.totalQuestion,totalQuestionList:[],totalAddQuestionList:[]}}this.questionType=a,this.imageType=r;let p="",g=0;for(const f of n){g>0&&(a=="step"||a=="image")&&(p="none");let l=[];if(o[g])for(const h of o[g])l.push({question:h,aiAnswer:"",userAnswer:"",btnDisabled:!0,modify:!1,loading:!1,problemClass:"none"});let c={question:f,subQuestions:l,aiAnswer:"",userAnswer:"",readonly:!1,btnDisabled:!0,modify:!1,loading:!1,problemClass:p};s.push(c),g++}return{type:a,list:s,imageType:r,graphType:i,gdType:u,isProblem:!1}},getIsProblemData(e,t){let s=[];if(t&&t.list&&(s=t.list),s.length>0){const n=JSON.parse(e.questions);let o="normal",a="",r="",i="",u={},p={};n.questions&&(o=n.questionType,o=="image"?a=n.imageType:o=="graph"&&(r=n.graphType,i=n.gdType));try{this.totalQuestion=JSON.parse(e.totalQuestion)}catch{this.totalQuestion={totalQuestion:e.totalQuestion,totalQuestionList:[],totalAddQuestionList:[]}}const g=[];this.questionType=o;let f=[];for(let l of s){o=="graph"&&(u=l.graphData,p=l.userGraphData),f=[];for(let c of l.subQuestions)c.btnDisabled=!1,c.modify=!1,c.loading=!1,c.problemClass="",f.push(c);l.subQuestions=f,l.btnDisabled=!1,l.modify=!1,l.loading=!1,l.problemClass="",g.push(l)}return{type:o,list:g,imageType:a,graphType:r,gdType:i,isProblem:!0,graphData:u,userGraphData:p}}else return this.getProblemData(e)},getSchoolTypeInfo(e,t){let s="",n="";if(e.schoolType&&e.grade&&e.textbookName){const o=e.schoolType.toString(),a=e.grade.toString(),r=e.textbookName.toString();if(t[o]){let i=t[o];s=i.title,i.items&&i.items[a]&&(s+=" "+i.items[a].title,i.items[a].items[r]&&(n=i.items[a].items[r]))}}return{info:s,book:n}},checkSafari(){if(this.checkBrowser()=="safari"){const e=navigator.userAgent.toLowerCase(),s=/version\/(\S+)/.exec(e)[1];if(parseInt(s)<14)return!0}return!1},checkBrowser(){const e=navigator.userAgent.toLowerCase();switch(!0){case e.indexOf("firefox")!==-1:case e.indexOf("trident")!==-1:case e.indexOf("edg/")!==-1:case e.indexOf("edge")!==-1:case e.indexOf("chrome")!==-1:break;case e.indexOf("safari")!==-1:return"safari"}return"not"},getRemainTime(e,t){let s=e.toString().substring(0,19)+"+09:00",n=new Date(s);const o=parseInt(t);n.setMinutes(n.getMinutes()+o);const a=n.getTime()/1e3,i=new Date(this.getStandardNowDate()).getTime()/1e3,u=a-i;let p=parseInt(u%60);return{min:parseInt(u/60),sec:p}},getStandardNowDate(){let e=new Date;const t=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,s=e.getDate()<10?"0"+e.getDate():e.getDate(),n=e.getHours()<10?"0"+e.getHours():e.getHours(),o=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),a=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return e.getFullYear()+"-"+t+"-"+s+"T"+n+":"+o+":"+a+"+09:00"},checkProhibitByWord(e,t){let s=/[`~!@#$%^&*()_|+\-=?;:'"<>\{\}\[\]\\\/ ]/g;e=e.toString(),e=e.replace(s,""),e=e.replace(/(\n|\r\n)/g,"");let n=!0;for(const o in t)if(e.indexOf(o)>=0){n=!1;break}return n}};export{D as U};
